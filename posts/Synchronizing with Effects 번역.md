---
title: "Synchronizing with Effects ë²ˆì—­"
description: "React 18ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ useEffectë¥¼ ì¼ë¶€ëŸ¬ 2ë²ˆ í˜¸ì¶œí•œë‹¤ëŠ”ë°,, ëŒ€ì²´ ì™œ?"
to: "Reactì˜ useEffectì˜ ì² í•™ì´ ê¶ê¸ˆí•œ ì‚¬ëŒ"
date: "2022-06-25"
---

> ì›ë¬¸: [https://beta.reactjs.org/learn/synchronizing-with-effects](https://beta.reactjs.org/learn/synchronizing-with-effects)

ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë¦¬ì•¡íŠ¸ ìƒíƒœë¥¼ í†µí•´ non-ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì»¨íŠ¸ë¡¤ í•˜ê³  ì‹¶ë‹¤ë˜ê°€, ì„œë²„ì™€ ì»¤ë„¥ì…˜ì„ ì—°ë‹¤ë˜ê°€, ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ëŠ” ê²ƒë“¤ì´ ìˆë‹¤. `Effects` ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ì•¡íŠ¸ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œë“¤ê³¼ ë™ê¸°í™” í•˜ê¸° ìœ„í•´ ë Œë” ì´í›„ì— ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.

```markdown
You will learn

- Effectsê°€ ë¬´ì—‡ì¸ì§€
- Effectsì™€ eventsê°€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€
- ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì–´ë–»ê²Œ ì„ ì–¸í•  ê²ƒì¸ì§€
- ì–´ë–»ê²Œ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ re-runí•˜ì§€ ì•Šë„ë¡ skip í•  ìˆ˜ ìˆëŠ”ì§€
- ì™œ EffectsëŠ” ê°œë°œ í™˜ê²½ì—ì„œ 2ë²ˆ ì‹¤í–‰ë˜ê³  ì–´ë–»ê²Œ ê³ ì¹˜ëŠ”ì§€
```

## Effectsì™€ eventsëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?

Effectsë¥¼ ì•Œê¸° ì „ì—, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ 2ê°€ì§€ ë¡œì§ê³¼ ì¹œí•´ì ¸ì•¼ í•œë‹¤.

- Rendering Code(introduced in [Describing the UI](https://beta.reactjs.org/learn/describing-the-ui))ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ ë ˆë²¨ì— ìˆë‹¤. ì´ê²ƒì€ propsì™€ stateë¥¼ ë‹¤ë£¨ê³  ê·¸ê²ƒë“¤ì„ ë³€í™˜í•˜ë©°, JSXë¥¼ í™”ë©´ì— ì›í•˜ëŠ” ê³³ì— ë¦¬í„´í•˜ëŠ” ê³³ì´ë‹¤. [Rendering code must be pure](https://beta.reactjs.org/learn/keeping-components-pure). ìˆ˜í•™ ê³µì‹ì²˜ëŸ¼ ê·¸ê²ƒì€ ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒ ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤.
- **Event handlers**(introduced in [Adding Interactivity](https://beta.reactjs.org/learn/adding-interactivity)) ëŠ” ë‹¨ìˆœ ê³„ì‚°í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ë¬´ì–¸ê°€ë¥¼ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ì¤‘ì²©ëœ í•¨ìˆ˜ë‹¤. `event handler`ëŠ” input fieldë¥¼ update í•˜ê±°ë‚˜, ì œí’ˆì„ êµ¬ë§¤í•˜ê¸° ìœ„í•´ HTTP POST ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜, ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ìœ ì €ê°€ ì´ë™í•˜ê²Œ í•  ê²ƒì´ë‹¤. `event handler` ëŠ” [â€œside effectsâ€](<https://en.wikipedia.org/wiki/Side_effect_(computer_science)>) (ì´ê²ƒì€ í”„ë¡œê·¸ë¨ì˜ ìƒíƒœë¥¼ ë°”ê¾¼ë‹¤)ë¥¼ í¬í•¨í•˜ê³  ìœ ì €ì˜ íŠ¹ë³„í•œ ì•¡ì…˜ìœ¼ë¡œ ë°œìƒí•œë‹¤.(ì˜ˆë¥¼ ë“¤ë©´ ë²„íŠ¼ í´ë¦­ì´ë‚˜ íƒ€ì´í•‘)

ë•Œë•Œë¡œ ê·¸ê²ƒì€ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤. `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ë©´, ì»´í¬ë„ŒíŠ¸ëŠ” í™”ë©´ì— ë³´ì´ì§€ ì•Šì•„ë„ chat serverì™€ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ì„œë²„ì™€ ì—°ê²°í•˜ëŠ” ê²ƒì€ `pure calculation` ì´ ì•„ë‹ˆë¯€ë¡œ(side effectì„) ê·¸ê²ƒì€ ë Œë”ë§ ë„ì¤‘ì— ì¼ì–´ë‚  ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ `ChatRoom` ì„ ë³´ì´ê²Œ í•˜ëŠ” í´ë¦­ê³¼ ê°™ì€ íŠ¹ì • ì´ë²¤íŠ¸ëŠ” ì—†ë‹¤.

**Effectsë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” side effectsë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.** ì±„íŒ…ì°½ì—ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒì€ ìœ ì €ê°€ ë²„íŠ¼ì„ í´ë¦­í•¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ë‹¤. í•˜ì§€ë§Œ ì„œë²„ ì»¤ë„¥ì…˜ì„ ì„¸íŒ…í•˜ëŠ” ê²ƒì€ ì–´ë–¤ ì¸í„°ë™ì…˜ê³¼ ìƒê´€ì—†ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— `Effect` ì´ë‹¤. EffectëŠ” í™”ë©´ì˜ ì—…ë°ì´íŠ¸ì˜ ë§ˆì§€ë§‰ [rendering process](https://beta.reactjs.org/learn/render-and-commit) ì— ì‹¤í–‰ëœë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ë„¤íŠ¸ì›Œí¬ë‚˜ ì„œë“œíŒŒí‹°)ì™€ ë™ê¸°í™”í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°ì´ë‹¤.

> ğŸ’¡ NOTE
>
> ì´ ì•„ë˜ì—ì„œ ë¶€í„°ëŠ” capitalized â€œEffectâ€ëŠ” ìœ„ì—ì„œ Reactì™€ ê´€ë ¨ìˆëŠ” Effectë¥¼ ë§í•œë‹¤. ë‹¤ì‹œ ë§í•´ì„œ ë Œë”ë§ìœ¼ë¡œ ì¸í•œ side effectë¥¼ ë§í•œë‹¤. í­ë„“ì€ í”„ë¡œê·¸ë˜ë° ê°œë…ìœ¼ë¡œëŠ” ìš°ë¦¬ëŠ” â€œside effectâ€ë¼ê³  ë¶€ë¥¼ ê²ƒì´ë‹¤.

## ë„ˆëŠ” ì•„ë§ˆë„ Effectê°€ í•„ìš”ì—†ë‹¤.

ì»´í¬ë„ŒíŠ¸ì— Effectsë¥¼ ë¬´ì‘ì • ì¶”ê°€í•˜ì§€ ë§ˆë¼. EffectsëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ â€œì ê¹â€ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë¸Œë¼ìš°ì € APIë‚˜ ì„œë“œíŒŒí‹° ìœ„ì ¯, ë„¤íŠ¸ì›Œí¬ ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹í•œë‹¤. ë§Œì•½ ë„ˆì˜ effectê°€ ì–´ë–¤ ìƒíƒœì— ê¸°ë°˜í•œ ìƒíƒœë§Œì„ ì¡°ì •í•œë‹¤ë©´, [you might not need an Effect.](https://beta.reactjs.org/learn/you-might-not-need-an-effect)

## Effectë¥¼ ì“°ëŠ” ë°©ë²•

Effectë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ ì„¸ ìŠ¤í…ì„ ë”°ë¼ë¼.

1. **Effectë¥¼ ì •ì˜í•´ë¼**. ê¸°ë³¸ì ìœ¼ë¡œ ë„ˆì˜ EffectëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ì‹¤í–‰ë  ê²ƒì´ë‹¤.
2. **Effectì˜ dependenciesë¥¼ ëª…ì‹œí•´ë¼.** ëŒ€ë¶€ë¶„ì˜ EffectsëŠ” ë§¤ë²ˆ ë Œë”ë˜ê¸° ë³´ë‹¤ëŠ” í•„ìš”í•  ë•Œë§Œ re-render ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œë§Œ ë™ì‘í•´ì•¼ í•œë‹¤. ì±„íŒ…ë°©ì„ ì—°ê²°í•˜ê³  í•´ì œí•˜ëŠ” ì¼ì€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ˆ ë•Œë‚˜ ì±„íŒ…ë°©ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ ì¼ì–´ë‚˜ì•¼ í•œë‹¤. dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ ì´ê²ƒì„ ì–´ë–»ê²Œ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê²ƒì¸ì§€ ë°°ìš¸ ê²ƒì´ë‹¤.
3. í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•´ë¼. ì–´ë–¤ EffectsëŠ” ê·¸ê²ƒì´ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦¬ê±°ë‚˜ clean up í•˜ëŠ” ë²•ì„ í•  ì§€ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `connect` ëŠ” `disconnect`, `subscribe` ëŠ” `unsubscribe` ê·¸ë¦¬ê³  `fetch` ëŠ” `cancel` ì´ë‚˜ `ignore` ê°€ í•„ìš”í•˜ë‹¤. cleanup functionì„ ë¦¬í„´í•¨ìœ¼ë¡œì¨ ì´ë ‡ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ê²ƒì´ë‹¤.

ìì„¸íˆ ì•Œì•„ë³´ì.

## Step 1: Effectë¥¼ ì •ì˜í•´ë¼

ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” useEffect Hookì„ import í•˜ì:

```tsx
import { useEffect } from "react";
```

ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ë ˆë²¨ì—ì„œ ì´ ì½”ë“œê°€ ì¶”ê°€ëœ ì´í™íŠ¸ë¥¼ í˜¸ì¶œí•˜ì:

```tsx
function MyComponent() {
  useEffect(() => {
    // Code here will run after *every* render
  });
  return <div />;
}
```

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”í•  ë•Œ ë§ˆë‹¤ ReactëŠ” ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ê³  useEffect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë‹¤ì‹œ ë§í•´ì„œ useEffectëŠ” í™”ë©´ì—ì„œ ë Œë”ë§ì´ ë°˜ì˜ë  ë•Œ ê¹Œì§€ ì½”ë“œ ì¡°ê°ë“¤ì„ ì§€ì—°í•œë‹¤.

Effectë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ì. `<VideoPlayer>` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ì— `isPlaying` propì„ ë„˜ê²¨ì„œ ì¬ìƒí•˜ê±°ë‚˜ ë©ˆì¶”ê²Œ ì»¨íŠ¸ë¡¤í•œë‹¤ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.

```tsx
<VideoPlayer isPlaying={isPlaying} />
```

VideoPlayer ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì € `<video>` íƒœê·¸ë¥¼ ë Œë”í•œë‹¤:

```tsx
function VideoPlayer({ src, isPlaying }) {
  // TODO: do something with isPlaying
  return <video src={src} />;
}
```

í•˜ì§€ë§Œ ë¸Œë¼ìš°ì €ì˜ `<video>` tagëŠ” `isPlaying` propì´ ì—†ë‹¤. ìœ ì¼í•˜ê²Œ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ìˆ˜ë™ìœ¼ë¡œ DOM elementì˜ play()ì™€ pause() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ë™ì˜ìƒì„ ì¬ìƒí•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” isPlaying propê³¼ play, pause ê°™ì€ í•„ìˆ˜ í˜¸ì¶œê³¼ ë™ê¸°í™” í•´ì•¼í•œë‹¤.

ìš°ë¦¬ëŠ” `<video>` DOM nodeì˜ refë¥¼ ì–»ì–´ì•¼ í•œë‹¤.

playë‚˜ pauseë¥¼ ë Œë”ë§ ì¤‘ì— í˜¸ì¶œí•˜ê³  ì‹¶ì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ê·¸ê²ƒì€ ì˜ëª»ëë‹¤.

ì´ ì½”ë“œê°€ í‹€ë¦° ì´ìœ ëŠ” DOM nodeê°€ ë Œë”ë§ ì¤‘ì— ë­”ê°€ë¥¼ í•˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œëŠ” JSXì˜ ë Œë”ë§ì€ ìˆœìˆ˜ í•¨ìˆ˜ì´ì–´ì•¼ í•˜ë©° DOMì„ ìˆ˜ì •í•˜ëŠ” ê²ƒ ê°™ì€ side effectsë¥¼ í¬í•¨í•˜ë©´ ì•ˆëœë‹¤.

ê²Œë‹¤ê°€ VideoPlayerê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ ê·¸ê²ƒì˜ DOMì€ ì•„ì§ ì—†ë‹¤! playë‚˜ pauseë¥¼ í˜¸ì¶œí•  DOM nodeê°€ ì•„ì§ ì—†ë‹¤. ì™œë‚˜í•˜ë©´ ë¦¬ì•¡íŠ¸ëŠ” JSXê°€ ë¦¬í„´í•˜ê¸° ì „ ê¹Œì§€ ìƒì„±ë  DOMì— ëŒ€í•´ì„œ ëª¨ë¥¸ë‹¤.

ë°©ë²•ì€ ë Œë”ë§ ê³„ì‚°ì—ì„œ side effectë¥¼ ë°–ìœ¼ë¡œ êº¼ë‚´ê¸° ìœ„í•´ useEffectë¡œ ë˜í•‘í•˜ëŠ” ê²ƒì´ë‹¤.

```tsx
import { useEffect, useRef } from "react";

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() => {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  });

  return <video ref={ref} src={src} loop playsInline />;
}
```

Effect ì•ˆì—ì„œ DOM updateë¥¼ ë˜í•‘í•¨ìœ¼ë¡œì¨ ë¦¬ì•¡íŠ¸ê°€ í™”ë©´ì„ ë¨¼ì € ì—…ë°ì´íŠ¸ í•˜ê²Œ í–ˆë‹¤. ê·¸ë¦¬ê³  Effectê°€ ì‹¤í–‰ëœë‹¤.

`VideoPlayer` ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë  ë•Œ(ì²« renderë‚˜ re-renderë“ ) ëª‡ê°€ì§€ ì¼ì´ ì¼ì–´ë‚œë‹¤. ë¨¼ì € ë¦¬ì•¡íŠ¸ê°€ ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ë©° ì˜¬ë°”ë¥¸ propìœ¼ë¡œ DOMì— `<video>` íƒœê·¸ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê·¸ë¦¬ê³  ë¦¬ì•¡íŠ¸ëŠ” Effectë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ EffectëŠ” playë‚˜ pauseë¥¼ isPlaying propì— ë”°ë¼ í˜¸ì¶œí•  ê²ƒì´ë‹¤.

Play/Puaseë¥¼ ì—¬ëŸ¬ ë²ˆ ëˆ„ë¥´ê³  video playerê°€ isPlaying ê°’ê³¼ ì–´ë–»ê²Œ ë™ê¸°í™”ë˜ëŠ”ì§€ ë³´ì.

ì˜ˆì œì—ì„œ ë¦¬ì•¡íŠ¸ ìƒíƒœì™€ ë™ê¸°í™”ëœ â€œì™¸ë¶€ ì‹œìŠ¤í…œâ€ì€ ë¸Œë¼ìš°ì € media API ì˜€ë‹¤. ë¹„ìŠ·í•œ ì ‘ê·¼ë²•ì„ ì„ ì–¸ì  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— legacy non-ë¦¬ì•¡íŠ¸ ì½”ë“œ(jQuery plugin ê°™ì€)ë¥¼ ë˜í•‘í•˜ì—¬ ì ìš©í•  ìˆ˜ ìˆë‹¤.

ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ë¥¼ ì»¨íŠ¸ë¡¤í•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œ ë” ë³µì¡í•˜ë‹¤. playë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ ë‚´ì¥ ë¸Œë¼ìš°ì € ì»¨íŠ¸ë¡¤ë¡œ play í˜¹ì€ pause í•  ìˆ˜ ìˆë‹¤. ì´ ì˜ˆì œëŠ” ë§¤ìš° ë‹¨ìˆœí•˜ê³  ë¶ˆì™„ì „í•˜ë‹¤.

> ğŸ’¡ Pitfall
> ê¸°ë³¸ì ìœ¼ë¡œ EffectsëŠ” ë§¤ ë Œë” í›„ì— ì‹¤í–‰ëœë‹¤. ì´ ë§ì€ ì™œ ì•„ë˜ì˜ ì½”ë“œê°€ ë¬´í•œë£¨í”„ë¥¼ ë°œìƒí•˜ëŠ” ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.
>
> ```tsx
> const [count, setCount] = useState(0);
> useEffect(() => {
>   setCount(count + 1);
> });
> ```
>
> EffectsëŠ” ë Œë”ë§ì˜ ê²°ê³¼ë¡œ ì‹¤í–‰í•œë‹¤. ìƒíƒœë¥¼ setí•˜ëŠ” ê²ƒì€ ë Œë”ë§ì„ ë°œìƒì‹œí‚¨ë‹¤. Effect ì•ˆì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ setí•˜ëŠ” ê²ƒì€ ì „ì› ë‹¨ìë¥¼ ìŠ¤ìŠ¤ë¡œ í”ŒëŸ¬ê·¸ë¥¼ ê½ƒëŠ” ê²ƒê³¼ ê°™ë‹¤. Effectê°€ ì‹¤í–‰ë˜ë©´, ìƒíƒœë¥¼ setí•˜ê³  ì´ê²ƒì€ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ì´ê²ƒì€ Effectë¥¼ ì‹¤í–‰í•˜ê³ , ìƒíƒœë¥¼ ë‹¤ì‹œ setí•˜ê³  ë˜ ë‹¤ë¥¸ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
> EffectsëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë§Œì•½ ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ê³  ë‹¨ìˆœíˆ ìƒíƒœë¥¼ ì¡°ì •í•˜ê¸° ìœ„í•´ Effectë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Effectê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²ƒì´ë‹¤.

## Step 2: Effectì˜ dependenciesë¥¼ ëª…ì‹œí•˜ì

ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ë§¤ ë Œë” ì´í›„ì— ì‹¤í–‰ëœë‹¤. ì¢…ì¢… ê·¸ê²ƒì€ ì›ì¹˜ ì•Šë˜ ê²ƒì´ë‹¤.

- ê°€ë”, ëŠë¦¬ë‹¤. ì™¸ë¶€ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ í•­ìƒ ì¦‰ì‹œì¸ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•„ìš”í•  ë•Œ ê¹Œì§€ ìŠ¤í‚µí•˜ê¸¸ ì›í•  ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë§¤ íƒ€ì´í•‘ë§ˆë‹¤ ì±— ì„œë²„ì™€ ì¬ì—°ê²° í•˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤.
- ê°€ë” í‹€ë¦°ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì„ ëª¨ë“  íƒ€ì´í•‘ì— ë™ì‘í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì• ë‹ˆë©”ì´ì…˜ì€ ìµœì´ˆì— ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œ í•œë²ˆë§Œ ë™ì‘í•´ì•¼ í•œë‹¤.

ì´ í˜„ìƒì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì•„ê¹Œì˜ ì˜ˆì œë¥¼ ëª‡ê°œì˜ console.log í˜¸ì¶œê³¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” text input ì´ ìˆë‹¤. íƒ€ì´í•‘í•  ë•Œ Effectê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì.

[playground example](https://codesandbox.io/s/8jyd5t?file=%2FApp.js&from-sandpack=true)

useEffect í˜¸ì¶œì˜ ë‘ë²ˆì§¸ ì¸ìë¡œ dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì¬ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤. ë¹ˆ `[]` ë°°ì—´ì„ ì¶”ê°€í•´ë³´ì.

```tsx
useEffect(() => {
  // ...
}, []);
```

`React Hook useEffect has a missing dependency: 'isPlaying'` ë¼ëŠ” ì—ëŸ¬ë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

ë¬¸ì œëŠ” isPlaying propì— ì˜ì¡´í•˜ëŠ” effect ë‚´ë¶€ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•  ì§€ ì •í•˜ì§€ë§Œ ì´ dependencyëŠ” ì™¸ë¶€ì— ì •ì˜ë˜ì§€ ì•Šì•˜ë‹¤. ì´ê±¸ ê³ ì¹˜ê¸° ìœ„í•´ì„œëŠ” `isPlaying`ì„ dependency arrayì— ì¶”ê°€í•˜ì.

```tsx
useEffect(() => {
  if (isPlaying) {
    // It's used here...
    // ...
  } else {
    // ...
  }
}, [isPlaying]); // ...so it must be declared here!
```

ì´ì œ ëª¨ë“  ì˜ì¡´ì„±ë“¤ì´ ì •ì˜ë˜ì–´ì„œ ì—ëŸ¬ê°€ ì—†ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì— `[isPlaying]` ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ `isPlaying` ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ ì¬ì‹¤í–‰ ë˜ëŠ” ê²ƒì„ skip í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ ë³€í™”ë¡œ inputì— íƒ€ì´í•‘í•˜ëŠ” ê²ƒì€ effectê°€ ì¬ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Play/Pauseë¥¼ í´ë¦­í•˜ëŠ” ê²ƒì€ ì¬ì‹¤í–‰ëœë‹¤.

ì˜ì¡´ì„± ë°°ì—´ì€ ì—¬ëŸ¬ê°œì˜ ì˜ì¡´ì„±ë“¤ì„ ê°–ì„ ìˆ˜ ìˆë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ëª…ì‹œëœ ëª¨ë“  ì˜ì¡´ì„±ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ Effectë¥¼ ì¬ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì˜ì¡´ì„± ê°’ì„ `[Object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)` ë¡œ ë¹„êµí•œë‹¤. useEffect API referenceì—ì„œ ë” ìì„¸íˆ ë³¼ ìˆ˜ ìˆìŒ

ì˜ì¡´ì„±ì„ â€œì„ íƒ"í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë§Œì•½ ëª…ì‹œí•œ ì˜ì¡´ì„±ì´ ë¦¬ì•¡íŠ¸ê°€ ì˜ˆìƒí•œ Effect ë‚´ë¶€ì˜ ì½”ë“œì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Lint errorë¥¼ ë³´ê²Œ ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ ì½”ë“œì—ì„œ ë§ì€ ë²„ê·¸ë¥¼ ì¡ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤. ë§Œì•½ Effectê°€ ëª‡ëª‡ ê°’ì„ ì´ìš©í•˜ì§€ë§Œ ê·¸ê²ƒì´ ë³€í•  ë•Œ ë§ˆë‹¤ ì¬ì‹¤í–‰ë˜ì§€ ì•Šê¸¸ ë°”ë€ë‹¤ë©´ Effect code ìŠ¤ìŠ¤ë¡œê°€ ê·¸ ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

> ğŸ’¡ Pitfall
> ì˜ì¡´ì„± ë°°ì—´ì´ ìˆëŠ” ê²½ìš°ì™€ ì—†ëŠ” ê²½ìš° ë™ì‘ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤.
>
> ```tsx
> useEffect(() => {
>   // This runs after every render
> });
>
> useEffect(() => {
>   // This runs only on mount (when the component appears)
> }, []);
>
> useEffect(() => {
>   // This runs on mount *and also* if either a or b have changed since the last render
> }, [a, b]);
> ```
>
> ë‹¤ìŒ ìŠ¤í…ì—ì„œ mountë¥¼ ìì„¸íˆ ì‚´í´ë³´ì

## Step 3: í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•˜ì

ë‹¤ë¥¸ ì˜ˆì œë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ chat serverì™€ ì—°ê²°í•  í•„ìš”ê°€ ìˆëŠ” `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆë‹¤. connectì™€ disconnectë¼ëŠ” ë©”ì†Œë“œë¥¼ í¬í•¨í•œ objectë¥¼ ë¦¬í„´í•˜ëŠ” `createConnection` ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ìœ ì €ì—ê²Œ ë³´ì—¬ì§ˆ ë•Œë§Œ ì—°ê²°ì„ ìœ ì§€í•  ìˆ˜ ìˆì„ê¹Œ?

Effect ì‘ì„± ë¶€í„° ì‹œì‘:

```tsx
useEffect(() => {
  const connection = createConnection();
  connection.connect();
});
```

ë§¤ë²ˆ ë Œë”í•  ë•Œ ë§ˆë‹¤ ì—°ê²°í•˜ëŠ” ê²ƒì€ ëŠë¦´í…Œë‹ˆê¹Œ, ì˜ì¡´ì„± ë°°ì—´ì„ ì¶”ê°€í•˜ì.

```tsx
useEffect(() => {
  const connection = createConnection();
  connection.connect();
}, []);
```

Effect ë‚´ë¶€ì˜ ì½”ë“œëŠ” ì–´ë–¤ propsë‚˜ stateë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì˜ì¡´ì„± ë°°ì—´ì€ `[]` ë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ mount ë˜ì—ˆì„ ë•Œ Effectë¥¼ ì‹¤í–‰í•  ê²ƒì„ ë§í•œë‹¤. (í™”ë©´ì— ì²˜ìŒ ë‚˜íƒ€ë‚¬ì„ ë•Œ)

ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì

[playground example](https://codesandbox.io/s/ivqrgu?file=%2FApp.js&from-sandpack=true)

ì´ EffectëŠ” ì˜¤ì§ mount ëì„ ë•Œë§Œ ì‹¤í–‰í•˜ë¯€ë¡œ â€œConnectingâ€¦â€ ì„ í•œë²ˆ ì¶œë ¥í•  ê²ƒì„ ì˜ˆìƒí–ˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ consoleì„ í™•ì¸í•´ë³´ë©´ 2ë²ˆ ì¶œë ¥ëœë‹¤. ì™œ ê·¸ëŸ´ê¹Œ?

`ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ì—¬ëŸ¬ ê°œì˜ ë‹¤ë¥¸ í™”ë©´ì´ ìˆëŠ” í° ì•±ì˜ ì¼ë¶€ë¶„ì´ë¼ê³  ìƒê°í•´ë³´ì. ìœ ì €ëŠ” `ChatRoom` í˜ì´ì§€ì—ì„œ ê·¸ë“¤ì˜ ì—¬ì •ì„ ì‹œì‘í•œë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ëŠ” mount ë˜ê³  `connection.connect` ë¥¼ í˜¸ì¶œí•œë‹¤. ê·¸ë¦¬ê³  ìœ ì €ê°€ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•œë‹¤ê³  ìƒê°í•´ë³´ìâ€”ì˜ˆë¥¼ ë“¤ì–´ í™˜ê²½ ì„¤ì • í˜ì´ì§€. ì´ `ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ëœë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ ì €ëŠ” ë’¤ë¡œê°€ê¸°ë¥¼ í´ë¦­í•˜ê³  `ChatRoom` ì´ ë‹¤ì‹œ mount ëœë‹¤. ì´ê²ƒì€ ë‘ ë²ˆì§¸ connectionì„ ì—°ê²°í•œë‹¤â€”í•˜ì§€ë§Œ ì²« ë²ˆì§¸ ì»¤ë„¥ì€ ì•„ì§ ì‚¬ë¼ì§€ì§€ ì•Šì•˜ë‹¤! ìœ ì €ê°€ ì•±ì„ ë„˜ë‚˜ë“¤ë©´ connectionì€ ê³„ì† ìŒ“ì¼ ê²ƒì´ë‹¤.

ì¼ì¼ì´ ê´‘ë²”ìœ„í•œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šê³ ì„œëŠ” ì´ëŸ° ë²„ê·¸ë“¤ì€ ë†“ì¹˜ê¸° ì‰½ë‹¤. ì´ëŸ° ê²ƒì„ ë¹¨ë¦¬ ì•Œê¸° ìœ„í•´ ë¦¬ì•¡íŠ¸ ê°œë°œ ëª¨ë“œì—ì„œëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì²« mount í›„ ë‹¤ì‹œ í•œë²ˆ mount í•œë‹¤. â€œConnectingâ€¦â€ ì´ 2ë²ˆ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì€ ì§„ì§œ ì´ìŠˆ:ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ê°€ unmount ëì„ ë•Œ connectionì„ closeí•˜ì§€ ì•Šì•˜ìŒì„ ë¹¨ë¦¬ ì•Œ ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.

ì´ ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Effectì— cleanup functionì„ returní•˜ì:

```tsx
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  return () => {
    connection.disconnect();
  };
}, []);
```

ë¦¬ì•¡íŠ¸ëŠ” cleanup functionì„ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê¸° ì „ì— í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ê°€ unmount(ì‚­ì œë  ë•Œ) ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ í˜¸ì¶œí•  ê²ƒì´ë‹¤. cleanup functionì´ êµ¬í˜„ë˜ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

[playground example](https://codesandbox.io/s/oil0if?file=%2FApp.js&from-sandpack=true)

developmodeì—ì„œ 3ê°œì˜ ì½˜ì†” ë¡œê·¸ë¥¼ ë³¼ ê²ƒì´ë‹¤.

1. `"Connecting..."`
2. `"Disconnected."`
3. `"Connecting..."`

ì´ê²ƒì€ ê°œë°œ ëª¨ë“œì—ì„œ ì˜¬ë°”ë¥¸ ë™ì‘ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ mountí•˜ë©´ì„œ, ë¦¬ì•¡íŠ¸ëŠ” ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ ì™€ë„ ì½”ë“œê°€ ë¬´ë„ˆì§€ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•œë‹¤. ì—°ê²°ì„ í•´ì œí•˜ê³  ë‹¤ì‹œ ì—°ê²°í•˜ëŠ” ê²ƒì€ ì •í™•íˆ ì¼ì–´ë‚˜ëŠ” ì¼ì´ë‹¤! cleanup ì„ ì˜ êµ¬í˜„í•œë‹¤ë©´, Effectë¥¼ í•œë²ˆ ì‹¤í–‰í•˜ê³  cleanupí•˜ê³ , ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ìœ ì €ê°€ ë³¼ ìˆ˜ ì—†ëŠ” ì°¨ì´ì¼ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ê°€ ê°œë°œí™˜ê²½ì—ì„œ ë‹ˆ ì½”ë“œì— ë²„ê·¸ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì¡°ì‚¬í•˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ connect/disconnect í˜¸ì¶œì„ í•œë‹¤. ì´ê²ƒì€ ì¼ë°˜ì ì´ê³  ì—†ì• ë ¤ê³  í•˜ë©´ ì•ˆëœë‹¤.

í”„ë¡œë•ì…˜ì—ì„œëŠ” `"Connecting..."` ì´ í•œë²ˆë§Œ ì¶œë ¥ë  ê²ƒì´ë‹¤. í•œë²ˆ ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸í•˜ëŠ” ê²ƒì€ ê°œë°œí™˜ê²½ì—ì„œ Effectì— cleanupì´ í•„ìš”í•˜ë‹¤ëŠ” ê±¸ ì°¾ëŠ” ê²ƒì„ ë„ì™€ì£¼ê¸° ìœ„í•´ì„œì´ë‹¤. ì´ëŸ° ê°œë°œ ë™ì‘ì„ ì—†ì• ê¸° ìœ„í•´ Strict Modeë¥¼ ëŒ ìˆ˜ ìˆì§€ë§Œ ê³„ì† ì¼œì ¸ìˆê¸°ë¥¼ ê¶Œì¥í•œë‹¤. ìœ„ì™€ ê°™ì€ ë²„ê·¸ë¥¼ ë§ì´ ì°¾ê²Œ í•´ì¤€ë‹¤.

## Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ê°€?

ë¦¬ì•¡íŠ¸ëŠ” ì˜ë„ì ìœ¼ë¡œ ìœ„ì˜ ì˜ˆì œ ì²˜ëŸ¼ ë²„ê·¸ë¥¼ ì°¾ê¸° ì‰½ë„ë¡ ê°œë°œí™˜ê²½ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ remount í•œë‹¤. ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì€ **â€œEffectë¥¼ í•œë²ˆë§Œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•â€ì´ ì•„ë‹ˆë¼ â€œEffectê°€ remount í›„ì—ë„ ì˜ ë™ì‘í•˜ë„ë¡ ê³ ì¹˜ëŠ” ë°©ë²•â€ ì´ì–´ì•¼ í•œë‹¤.** ë³´í†µ ì •ë‹µì€ cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤. cleanup functionì€ Effectì˜ ë™ì‘ì„ Effectê°€ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦´ ê²ƒì´ë‹¤. ì œ 1ì˜ ê·œì¹™ì€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ Effectê°€ í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ê°œë°œ í™˜ê²½ì—ì„œ effect â†’ cleanup â†’ effect í•˜ëŠ” ë™ì•ˆ ìœ ì €ê°€ ê·¸ê²ƒì„ ì‹ë³„í•  ìˆ˜ ì—†ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.

ëŒ€ë¶€ë¶„ì˜ ì‘ì„±ë  Effect ì•„ë˜ì˜ ì¼ë°˜ì ì¸ íŒ¨í„´ì— ì†í•  ê²ƒì´ë‹¤.

## Non-React ìœ„ì ¯ ë‹¤ë£¨ê¸°

ê°€ë” Reactë¡œ ì‘ì„±ë˜ì§€ ì•Šì€ UI ìœ„ì ¯ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ map ì»´í¬ë„ŒíŠ¸ë¥¼ í˜ì´ì§€ì— ì¶”ê°€í•œë‹¤ê³  í•´ë³´ì. `setZoomLevel` ì´ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆê³  ë¦¬ì•¡íŠ¸ ì½”ë“œì—ì„œ `zoomLevel`ì˜ ìƒíƒœ ê°’ì„ í†µí•´ zoom levelì„ ë™ê¸°í™” í•˜ê³  ì‹¶ë‹¤. EffectëŠ” ì´ë ‡ê²Œ ìƒê²¼ì„ ê²ƒì´ë‹¤.

```tsx
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

ì´ ê²½ìš°ì—ëŠ” cleanup ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ê°œë°œ ëª¨ë“œì—ì„œëŠ” ë¦¬ì•¡íŠ¸ê°€ Effectë¥¼ 2ë²ˆ í˜¸ì¶œí•  ê²ƒì´ì§€ë§Œ ì´ê²ƒì€ setZoomLevelì´ ê°™ì€ ê°’ìœ¼ë¡œ 2ë²ˆ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì•„ë‹ˆë‹¤. ì¡°ê¸ˆì€ ëŠë¦´ ìˆ˜ ìˆì§€ë§Œ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ê·¸ë ‡ì§€ í”„ë¡œë•ì…˜ì—ì„  ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

ì–´ë–¤ APIëŠ” í•œë²ˆì— í•¨ìˆ˜ë¥¼ 2ë²ˆ í˜¸ì¶œí•˜ë„ë¡ í—ˆë½í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ `<dialog>` elementì˜ ë‚´ì¥ í•¨ìˆ˜ì¸ `showModal` í•¨ìˆ˜ëŠ” 2ë²ˆ í˜¸ì¶œí•œë‹¤ë©´ ì—ëŸ¬ë¥¼ ë±‰ì„ ê²ƒì´ë‹¤. cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ dialogë¥¼ ë‹«ê²Œ í•œë‹¤.

```tsx
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

ê°œë°œ í™˜ê²½ì—ì„œ, EffectëŠ” showModal()ì„ í˜¸ì¶œí•˜ê³  ì¦‰ì‹œ close() ê·¸ë¦¬ê³ ëŠ” showModal()ì„ ë‹¤ì‹œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ì´ ë™ì‘ì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©ìê°€ showModalì„ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ë™ì‘ê³¼ ê°™ë‹¤.

## ì´ë²¤íŠ¸ êµ¬ë…í•˜ê¸°

ë§Œì•½ Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•˜ê³  ìˆë‹¤ë©´ cleanup functionì€ êµ¬ë… ì·¨ì†Œë¥¼ í•´ì•¼í•œë‹¤.

```tsx
useEffect(() => {
  function handleScroll(e) {
    console.log(e.clientX, e.clientY);
  }
  window.addEventListener("scroll", handleScroll);
  return () => window.removeEventListener("scroll", handleScroll);
}, []);
```

ê°œë°œ í™˜ê²½ì—ì„œ EffectëŠ” addEventListener(), removeEventListener() ê·¸ë¦¬ê³  ë‹¤ì‹œ addEventListener()ë¥¼ ê°™ì€ í•¸ë“¤ëŸ¬ë¡œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ í•˜ë‚˜ì˜ í™œì„± êµ¬ë…ë§Œ í•œ ì‹œê°„ì— ì¡´ì¬í•œë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ addEventListenerë¥¼ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

## ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°

ë§Œì•½ Effectì— ì• ë‹ˆë©”ì´ì…˜ì´ ìˆë‹¤ë©´ cleanup functionì´ ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.

```tsx
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
  return () => {
    node.style.opacity = 0; // Reset to the initial value
  };
}, []);
```

ê°œë°œ í™˜ê²½ì—ì„œ opacirtyëŠ” 1ë¡œ ì„¤ì •ëë‹¤ê°€, 0 ê·¸ë¦¬ê³  ë‹¤ì‹œ 1ë¡œ ì„¤ì •ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ opacityë¥¼ 1ë¡œ ë°”ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë§Œì•½ ì„œë“œíŒŒí‹° ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ tweeningë„ ì§€ì›í•œë‹¤ë©´ cleanup functionì€ tweenì˜ ì‹œê°„ ì„¤ì •ë„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.

## ë°ì´í„° fetching

Effectê°€ ë¬´ì–¸ê°€ë¥¼ fetching í•œë‹¤ë©´ cleanup functionì€ fetchë¥¼ abortí•˜ê±°ë‚˜ ë¬´ì‹œí•´ì•¼ í•œë‹¤:

```tsx
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì´ë¯¸ ì¼ì–´ë‚¬ê¸° ë•Œë¬¸ì— â€œundoâ€ í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ cleanup functionì€ ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ” fetchê°€ ì•±ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, userIdê°€ Aliceì—ì„œ Bobìœ¼ë¡œ ë°”ë€ŒëŠ” ê²½ìš° cleanupì€ Aliceì˜ reponseëŠ” Bob ë‹¤ìŒ ë„ì°©í•˜ë”ë¼ë„ ë¬´ì‹œí•´ì•¼ í•œë‹¤.

ê°œë°œ í™˜ê²½ì—ì„œëŠ”, ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ 2ê°œì˜ fetchë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì˜ëª»ëœ ê²ƒì€ ì—†ë‹¤. ìœ„ì™€ ê°™ì€ ì ‘ê·¼ë²•ìœ¼ë¡œ ì²« ë²ˆì§¸ ErffectëŠ” ì¦‰ì‹œ cleaned up ë  ê²ƒì´ê³  ignore ë³€ìˆ˜ì˜ ë³µì‚¬ë³¸ì€ trueê°€ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì¶”ê°€ì ì¸ ìš”ì²­ì´ ìˆë”ë¼ë„ if(!ignore) check ë•ë¶„ì— ìƒíƒœì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ìˆì„ ê²ƒì´ë‹¤. ë§Œì•½ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê°œë°œ í™˜ê²½ì—ì„œ ê·€ì°®ê²Œ í•œë‹¤ë©´ ê°€ì¥ ì¢‹ì€ ì ‘ê·¼ ë°©ë²•ì€ ì¤‘ë³µëœ ìš”ì²­ê³¼ ìºì‹œë¥¼ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

```tsx
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
```

ì´ê²ƒì€ ê°œë°œ ê²½í—˜ì„ ìƒìŠ¹ì‹œí‚¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì•±ì„ ë” ë¹ ë¥´ê²Œ ë§Œë“ ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìœ ì €ëŠ” ë°ì´í„°ê°€ ìºì‹œë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¡œë“œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤. ìŠ¤ìŠ¤ë¡œ ìºì‹œë¥¼ ë§Œë“¤ì–´ë„ ë˜ê³  Effect ì—ì„œ ì†ìˆ˜ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ì—¬ëŸ¬ ê°€ì§€ ëŒ€ì²´ì¬ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ë¶„ì„ ë³´ë‚´ê¸°

ì´ ì½”ë“œê°€ í˜ì´ì§€ ë°©ë¬¸í•  ë•Œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤ê³  ìƒê°í•´ë³´ì.

```tsx
useEffect(() => {
  logVisit(url); // Sends a POST request
}, [url]);
```

ê°œë°œ í™˜ê²½ì—ì„œëŠ”, `logVisit` ì´ ëª¨ë“  URL ë§ˆë‹¤ 2ë²ˆ ìš”ì²­í•  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤. **ì½”ë“œ ê·¸ëŒ€ë¡œ ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ì•ì˜ ì˜ˆì œ ì²˜ëŸ¼ `í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ë‘ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì—ì„œ ìœ ì €ê°€ ì°¨ì´ë¥¼ ëŠë‚„ ìˆ˜ ì—†ë‹¤.`** ì‹¤ì œì˜ ê´€ì ì—ì„œ ë³´ë©´, ê°œë°œ í™˜ê²½ì´ í”„ë¡œë•ì…˜ì˜ ì§€í‘œë¥¼ ì˜¤ì—¼ì‹œí‚¤ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì—`logVisit` ì€ ê°œë°œ í™˜ê²½ì—ì„œ ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” íŒŒì¼ì„ ì €ì¥í•  ë•Œ ë§ˆë‹¤ remount ë˜ë¯€ë¡œ ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì–´ì°¨í”¼ ì—¬ëŸ¬ë²ˆ ë³´ë‚¸ë‹¤.

**í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¤‘ë³µëœ visit logê°€ ì—†ë‹¤.**

ë³´ë‚´ê³  ìˆëŠ” ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë””ë²„ê·¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ì•±ì„ ìŠ¤í…Œì´ì§• í™˜ê²½(production mode)ì— ë°°í¬í•˜ê±°ë‚˜ ì„ì‹œë¡œ Strict Modeë¥¼ ì œê±°í•˜ê³ , ê°œë°œ í™˜ê²½ì—ì„œ remounting checkë¥¼ í•  ìˆ˜ ìˆë‹¤. Effect ëŒ€ì‹  route change ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¶„ì„ì„ ë³´ë‚¼ ìˆ˜ë„ ìˆë‹¤. ì¢€ ë” ì •ë°€í•œ ë¶„ì„ì„ ìœ„í•´ì„œëŠ” `intersection observers` ê°€ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ viewportì— ìˆê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ ë³´ì´ëŠ”ì§€ ë„ì™€ì¤„ ìˆ˜ ìˆë‹¤.

## Effectê°€ ì•„ë‹Œ ê²ƒ: ì•± init

ì–´ë–¤ ë¡œì§ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•´ì•¼ í•œë‹¤. ì´ëŸ° ê±´ ì»´í¬ë„ŒíŠ¸ ë°–ì— ë‘˜ ìˆ˜ ìˆë‹¤.

```tsx
if (typeof window !== "undefined") {
  // Check if we're running in the browser.
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

ì´ê²ƒì€ í˜ì´ì§€ê°€ ë¸Œë¼ìš°ì €ì— ë¡œë“œë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•  ê²ƒì„ ë³´ì¥í•œë‹¤.

## Effectê°€ ì•„ë‹Œ ê²ƒ: ì œí’ˆ êµ¬ë§¤

ë•Œë•Œë¡œ cleanup functionì„ ì‘ì„±í•˜ë”ë¼ë„ Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ user-visibleí•œ ë™ì‘ì„ ë§‰ì„ ë°©ë²•ì´ ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Effectê°€ ì œí’ˆ êµ¬ë§¤ ê°™ì€ POST ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

```tsx
useEffect(() => {
  // ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.
  fetch("/api/buy", { method: "POST" });
}, []);
```

ì œí’ˆì´ ë‘ë²ˆ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ ì™œ Effectì— ì´ ë¡œì§ì„ ë„£ì–´ì•¼ë§Œ í–ˆì„ê¹Œ? ë§Œì•½ ìœ ì €ê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ê°”ë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì˜¨ë‹¤ë©´? EffectëŠ” ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤. ìœ ì €ê°€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í–ˆì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ë°”ë¼ì§€ ì•Šì„ ê²ƒì´ë‹¤. êµ¬ë§¤ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›í•  ê²ƒì´ë‹¤.

êµ¬ë§¤ëŠ” ë Œë”ë¡œ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤; íŠ¹ì • ì¸í„°ë™ì…˜ì´ ì˜í•´ ë°œìƒí•œë‹¤. ë‹¨ì§€ ì¸í„°ë™ì…˜ì´ í•œë²ˆ ë°œìƒí–ˆì„ ë•Œ í•œë²ˆ ì‹¤í–‰ë  ë¿ì´ë‹¤. Effectë¥¼ ì§€ìš°ê³  api ìš”ì²­ì€ êµ¬ë§¤ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì˜®ê¸°ì.

```tsx
function handleClick() {
  // âœ… Buying is an event because it is caused by a particular interaction.
  fetch("/api/buy", { method: "POST" });
}
```

ë§Œì•½ remountê°€ ì•±ì˜ ë¡œì§ì„ íŒŒê´´í•œë‹¤ë©´ ì´ê²ƒì€ ë“œëŸ¬ë‚˜ì§€ ì•Šì€ ì¡´ì¬í•˜ëŠ” ë²„ê·¸ì„ì„ ë³´ì—¬ì¤€ë‹¤. ìœ ì €ì˜ ì‹œì„ ì—ì„œ, í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ëŠ” ê²ƒì€ ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜ ë§í¬ë¥¼ ëˆ„ë¥´ëŠ” ê²ƒê³¼ ë‹¤ë¥´ë©´ ì•ˆëœë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ê°œë°œ í™˜ê²½ì—ì„œ í•œë²ˆ remount í•¨ìœ¼ë¡œì¨ ì´ ì›ì¹™ì„ íŒŒê´´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì…ì¦í•œë‹¤.

## í•œë²ˆì— ë•Œë ¤ë„£ê¸°

ì´ í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” ì˜ˆì œì—ì„œ Effectê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ â€œëŠë‚Œì„ ê°–ë„ë¡" ë„ì™€ì¤€ë‹¤.

ì´ ì˜ˆì œëŠ” Effectê°€ ì‹¤í–‰ë˜ê³  3ì´ˆ í›„ input textê°€ console.logì™€ í•¨ê»˜ ë‚˜íƒ€ë‚˜ê²Œ í•˜ë„ë¡ setTimeoutì„ ì‚¬ìš©í•œë‹¤. ì´ cleanup functionì€ ëŒ€ê¸°ì¤‘ì¸ timeoutì„ ì·¨ì†Œí•œë‹¤. â€œMount the componentâ€ë¥¼ ëˆŒëŸ¬ì„œ ì‹œì‘í•´ë³´ì.

[playground example](https://codesandbox.io/s/8jsz1t?file=%2FApp.js&from-sandpack=true)

> ëŒ€ì¶© Schedule, Cancel ë˜ëŠ” ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆê³  ì—¬ëŸ¬ ë²ˆ ì…ë ¥í•´ë„ clearTimeout ë•Œë¬¸ì— textê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì…ë ¥í•œ ì‹œì ìœ¼ë¡œë¶€í„° 3ì´ˆ í›„ì— ë‹¨ í•˜ë‚˜ë§Œ ë³´ì—¬ì§ˆ ê²ƒì´ë¼ëŠ” ì„¤ëª…

## Recap

- Unlike events, Effects are caused by rendering itself rather than a particular interaction.
- Effects let you synchronize a component with some external system (third-party API, network, etc).
- By default, Effects run after every render (including the initial one).
- React will skip the Effect if all of its dependencies have the same values as during the last render.
- You canâ€™t â€œchooseâ€ your dependencies. They are determined by the code inside the Effect.
- An empty dependency array (`[]`) corresponds to the component â€œmountingâ€, i.e. being added to the screen.
- When Strict Mode is on, React mounts components twice (in development only!) to stress-test your Effects.
- If your Effect breaks because of remounting, you need to implement a cleanup function.
- React will call your cleanup function before the Effect runs next time, and during the unmount.
