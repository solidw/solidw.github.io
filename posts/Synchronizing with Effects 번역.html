<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@handle"/><meta property="og:url" content="https://solidw.github.io"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solidw.github.io/me.jpeg"/><meta property="og:image:alt" content="íœë¡œì¦ˆì˜ ì‚¼ê°í˜•"/><meta property="og:image:width" content="300"/><meta property="og:image:height" content="300"/><meta property="og:locale" content="ko_KR"/><meta property="og:site_name" content="solidwì˜ ë¸”ë¡œê·¸"/><title>Synchronizing with Effects ë²ˆì—­ |  solidwì˜ ë¸”ë¡œê·¸</title><meta name="robots" content="index,follow"/><meta name="description" content="React 18ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ useEffectë¥¼ ì¼ë¶€ëŸ¬ 2ë²ˆ í˜¸ì¶œí•œë‹¤ëŠ”ë°,, ëŒ€ì²´ ì™œ?"/><meta property="og:title" content="Synchronizing with Effects ë²ˆì—­ |  solidwì˜ ë¸”ë¡œê·¸"/><meta property="og:description" content="React 18ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ useEffectë¥¼ ì¼ë¶€ëŸ¬ 2ë²ˆ í˜¸ì¶œí•œë‹¤ëŠ”ë°,, ëŒ€ì²´ ì™œ?"/><link rel="canonical" href="/posts/Synchronizing%20with%20Effects%20%EB%B2%88%EC%97%AD"/><meta name="next-head-count" content="19"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-fd1bc4a65a80e5c8.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-d8b1ff545a609496.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b021d285b39e7bab.js" defer=""></script><script src="/_next/static/chunks/731-97c8fdd4b1daf2e0.js" defer=""></script><script src="/_next/static/chunks/939-ed4a84a6fd5d65f2.js" defer=""></script><script src="/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/_next/static/chunks/177-2355828f5e7c81e0.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5BfileName%5D-185be4a47ce7760e.js" defer=""></script><script src="/_next/static/eXTxztqATL_0xplJ-YxvT/_buildManifest.js" defer=""></script><script src="/_next/static/eXTxztqATL_0xplJ-YxvT/_ssgManifest.js" defer=""></script><script src="/_next/static/eXTxztqATL_0xplJ-YxvT/_middlewareManifest.js" defer=""></script></head><meta name="theme-color" content="#d6d7ff"/><meta name="naver-site-verification" content="10cd16441bbd706012ce8f01d85b6b34a2c5dfce"/><link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-P1EMSKGQP3"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'G-P1EMSKGQP3');</script><body><div id="__next"><style data-emotion="css-global 1d9mpn4">html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none;}@font-face{font-family:"VitroCore";src:local("/fonts/VitroCore.ttf"),url("/fonts/VitroCore.ttf");}@font-face{font-family:"VitroPride";src:local("/fonts/VitroPride.ttf"),url("/fonts/VitroPride.ttf");}body{font-family:"VitroPride","VitroCore","SpoqaHanSansRegular",Arial,Helvetica,sans-serif;font-size:1.6rem;}html{font-size:62.5%;}*{box-sizing:border-box;white-space:normal;}html{color:#001f3f;background-color:#d6d7ff;min-height:100%;letter-spacing:-0.2px;}</style><style data-emotion="css 1pktc6j">.css-1pktc6j{position:-webkit-sticky;position:sticky;top:0;height:80px;z-index:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;padding:0px 30px;background-color:#d6d7ff;box-shadow:5px 5px 5px #b6b7d9,-5px -5px 5px #f6f7ff;}</style><header class="css-1pktc6j"><style data-emotion="css b2tuel">.css-b2tuel{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:20px;font-size:1.4rem;list-style:none;margin:0;padding:0;}</style><ul class="css-b2tuel"><li class="css-0"><style data-emotion="css pb9bc6">.css-pb9bc6{font-size:2.4rem;font-weight:bold;}</style><style data-emotion="css i8ev83">.css-i8ev83{-webkit-text-decoration:none;text-decoration:none;color:inherit;font-size:2.4rem;font-weight:bold;}</style><a class="css-i8ev83" href="/">solidw</a></li></ul><style data-emotion="css p9mjn3">.css-p9mjn3{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:1.8rem;}</style><style data-emotion="css kav0r6">.css-kav0r6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:20px;font-size:1.4rem;list-style:none;margin:0;padding:0;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;font-size:1.8rem;}</style><ul class="css-kav0r6"><li class="css-0"><style data-emotion="css co7u6l">.css-co7u6l{-webkit-text-decoration:none;text-decoration:none;color:inherit;}</style><a class="css-co7u6l" href="/me"><style data-emotion="css 1w0uwvn">.css-1w0uwvn{padding:8px 20px;font-size:1.6rem;border-radius:8px;border:none;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;color:#001f3f;background:#d6d7ff;box-shadow:5px 5px 10px #b6b7d9,-5px -5px 10px #f6f7ff;}.css-1w0uwvn:hover{box-shadow:2px 2px 5px #b6b7d9,-2px -2px 5px #f6f7ff;}.css-1w0uwvn:active{box-shadow:inset 1px 1px 2px #b6b7d9,inset -1px -1px 2px #f6f7ff;}</style><button class="css-1w0uwvn">ME</button></a></li><li class="css-0"><a class="css-co7u6l" href="/posts"><button class="css-1w0uwvn">POST</button></a></li></ul></header><main><style data-emotion="css 14m58jm">.css-14m58jm{max-width:900px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;margin-top:40px;border-radius:15px;padding:20px;box-shadow:3px 3px 5px #b6b7d9,-3px -3px 5px #f6f7ff;}</style><article class="css-14m58jm"><style data-emotion="css 1399xzr">.css-1399xzr{margin-bottom:10px;}</style><style data-emotion="css qgugrt">.css-qgugrt{font-size:3.2rem;margin-bottom:10px;}</style><h1 class="css-qgugrt">Synchronizing with Effects ë²ˆì—­</h1><span class="css-1399xzr">2022. 06. 25.</span><style data-emotion="css 1xhjb88">.css-1xhjb88{height:1px;margin:5px 0px;}</style><hr class="css-1xhjb88"/><style data-emotion="css 1kmeffr">.css-1kmeffr{gap:20px;}</style><style data-emotion="css d0l4l7">.css-d0l4l7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;gap:20px;}</style><div class="css-d0l4l7"><style data-emotion="css 1qrqdc1">.css-1qrqdc1{line-height:3rem;word-break:break-all;}.css-1qrqdc1 blockquote{box-shadow:inset 1px 1px 2px #b6b7d9,inset -1px -1px 2px #f6f7ff;margin:0;padding:5px;border-left:0.25em solid #6667AB;}.css-1qrqdc1 blockquote>*{margin:0;}.css-1qrqdc1 p>code{box-shadow:inset 1px 1px 2px #b6b7d9,inset -1px -1px 2px #f6f7ff;padding:5px;margin-left:3px;margin-right:3px;color:#d55373;}.css-1qrqdc1:not(pre)>code[class*="language-"],.css-1qrqdc1 pre{box-shadow:inset 3px 3px 5px #b6b7d9,inset -3px -3px 5px #f6f7ff;border:none;padding:15px;}.css-1qrqdc1 code[class*="language-"],.css-1qrqdc1 pre[class*="language-"]{background:none;color:hsl(230, 8%, 24%);font-family:"Fira Code","Fira Mono",Menlo,Consolas,"DejaVu Sans Mono",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1qrqdc1 code[class*="language-"]::-moz-selection,.css-1qrqdc1 code[class*="language-"] *::-moz-selection,.css-1qrqdc1 pre[class*="language-"] *::-moz-selection{background:hsl(230, 1%, 90%);color:inherit;}.css-1qrqdc1 code[class*="language-"]::selection,.css-1qrqdc1 code[class*="language-"] *::selection,.css-1qrqdc1 pre[class*="language-"] *::selection{background:hsl(230, 1%, 90%);color:inherit;}.css-1qrqdc1 pre[class*="language-"]{padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em;}.css-1qrqdc1:not(pre)>code[class*="language-"]{padding:0.2em 0.3em;border-radius:0.3em;white-space:normal;}.css-1qrqdc1 .token.comment,.css-1qrqdc1 .token.prolog,.css-1qrqdc1 .token.cdata{color:hsl(230, 4%, 64%);}.css-1qrqdc1 .token.doctype,.css-1qrqdc1 .token.punctuation,.css-1qrqdc1 .token.entity{color:hsl(230, 8%, 24%);}.css-1qrqdc1 .token.attr-name,.css-1qrqdc1 .token.class-name,.css-1qrqdc1 .token.boolean,.css-1qrqdc1 .token.constant,.css-1qrqdc1 .token.number,.css-1qrqdc1 .token.atrule{color:hsl(35, 99%, 36%);}.css-1qrqdc1 .token.keyword{color:hsl(301, 63%, 40%);}.css-1qrqdc1 .token.property,.css-1qrqdc1 .token.tag,.css-1qrqdc1 .token.symbol,.css-1qrqdc1 .token.deleted,.css-1qrqdc1 .token.important{color:hsl(5, 74%, 59%);}.css-1qrqdc1 .token.selector,.css-1qrqdc1 .token.string,.css-1qrqdc1 .token.char,.css-1qrqdc1 .token.builtin,.css-1qrqdc1 .token.inserted,.css-1qrqdc1 .token.regex,.css-1qrqdc1 .token.attr-value,.css-1qrqdc1 .token.attr-value>.token.punctuation{color:hsl(119, 34%, 47%);}.css-1qrqdc1 .token.variable,.css-1qrqdc1 .token.operator,.css-1qrqdc1 .token.function{color:hsl(221, 87%, 60%);}.css-1qrqdc1 .token.url{color:hsl(198, 99%, 37%);}.css-1qrqdc1 .token.attr-value>.token.punctuation.attr-equals,.css-1qrqdc1 .token.special-attr>.token.attr-value>.token.value.css{color:hsl(230, 8%, 24%);}.css-1qrqdc1 .language-css .token.selector{color:hsl(5, 74%, 59%);}.css-1qrqdc1 .language-css .token.property{color:hsl(230, 8%, 24%);}.css-1qrqdc1 .language-css .token.function,.css-1qrqdc1 .language-css .token.url>.token.function{color:hsl(198, 99%, 37%);}.css-1qrqdc1 .language-css .token.url>.token.string.url{color:hsl(119, 34%, 47%);}.css-1qrqdc1 .language-css .token.important,.css-1qrqdc1 .language-css .token.atrule .token.rule{color:hsl(301, 63%, 40%);}.css-1qrqdc1 .language-javascript .token.operator{color:hsl(301, 63%, 40%);}.css-1qrqdc1 .language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:hsl(344, 84%, 43%);}.css-1qrqdc1 .language-json .token.operator{color:hsl(230, 8%, 24%);}.css-1qrqdc1 .language-json .token.null.keyword{color:hsl(35, 99%, 36%);}.css-1qrqdc1 .language-markdown .token.url,.css-1qrqdc1 .language-markdown .token.url>.token.operator,.css-1qrqdc1 .language-markdown .token.url-reference.url>.token.string{color:hsl(230, 8%, 24%);}.css-1qrqdc1 .language-markdown .token.url>.token.content{color:hsl(221, 87%, 60%);}.css-1qrqdc1 .language-markdown .token.url>.token.url,.css-1qrqdc1 .language-markdown .token.url-reference.url{color:hsl(198, 99%, 37%);}.css-1qrqdc1 .language-markdown .token.blockquote.punctuation,.css-1qrqdc1 .language-markdown .token.hr.punctuation{color:hsl(230, 4%, 64%);font-style:italic;}.css-1qrqdc1 .language-markdown .token.code-snippet{color:hsl(119, 34%, 47%);}.css-1qrqdc1 .language-markdown .token.bold .token.content{color:hsl(35, 99%, 36%);}.css-1qrqdc1 .language-markdown .token.italic .token.content{color:hsl(301, 63%, 40%);}.css-1qrqdc1 .language-markdown .token.strike .token.content,.css-1qrqdc1 .language-markdown .token.strike .token.punctuation,.css-1qrqdc1 .language-markdown .token.list.punctuation,.css-1qrqdc1 .language-markdown .token.title.important>.token.punctuation{color:hsl(5, 74%, 59%);}.css-1qrqdc1 .token.bold{font-weight:bold;}.css-1qrqdc1 .token.comment,.css-1qrqdc1 .token.italic{font-style:italic;}.css-1qrqdc1 .token.entity{cursor:help;}.css-1qrqdc1 .token.namespace{opacity:0.8;}.css-1qrqdc1 .token.token.tab:not(:empty):before,.css-1qrqdc1 .token.token.cr:before,.css-1qrqdc1 .token.token.lf:before,.css-1qrqdc1 .token.token.space:before{color:hsla(230, 8%, 24%, 0.2);}.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:0.4em;}.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:hsl(230, 1%, 90%);color:hsl(230, 6%, 44%);padding:0.1em 0.4em;border-radius:0.3em;}.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover,.css-1qrqdc1 div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus{background:hsl(230, 1%, 78%);color:hsl(230, 8%, 24%);}.css-1qrqdc1 .line-highlight.line-highlight{background:hsla(230, 8%, 24%, 0.05);}.css-1qrqdc1 .line-highlight.line-highlight:before,.css-1qrqdc1 .line-highlight.line-highlight[data-end]:after{background:hsl(230, 1%, 90%);color:hsl(230, 8%, 24%);padding:0.1em 0.6em;border-radius:0.3em;box-shadow:0 2px 0 0 rgba(0, 0, 0, 0.2);}.css-1qrqdc1 pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:hsla(230, 8%, 24%, 0.05);}.css-1qrqdc1 .line-numbers.line-numbers .line-numbers-rows,.css-1qrqdc1 .command-line .command-line-prompt{border-right-color:hsla(230, 8%, 24%, 0.2);}.css-1qrqdc1 .line-numbers .line-numbers-rows>span:before,.css-1qrqdc1 .command-line .command-line-prompt>span:before{color:hsl(230, 1%, 62%);}.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-1,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-5,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-9{color:hsl(5, 74%, 59%);}.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-2,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-6,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-10{color:hsl(119, 34%, 47%);}.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-3,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-7,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-11{color:hsl(221, 87%, 60%);}.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-4,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-8,.css-1qrqdc1 .rainbow-braces .token.token.punctuation.brace-level-12{color:hsl(301, 63%, 40%);}.css-1qrqdc1 pre.diff-highlight>code .token.token.deleted:not(.prefix),.css-1qrqdc1 pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:hsla(353, 100%, 66%, 0.15);}.css-1qrqdc1 pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,.css-1qrqdc1 pre.diff-highlight>code .token.token.deleted:not(.prefix) *::-moz-selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection{background-color:hsla(353, 95%, 66%, 0.25);}.css-1qrqdc1 pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,.css-1qrqdc1 pre.diff-highlight>code .token.token.deleted:not(.prefix) *::selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.deleted:not(.prefix) *::selection{background-color:hsla(353, 95%, 66%, 0.25);}.css-1qrqdc1 pre.diff-highlight>code .token.token.inserted:not(.prefix),.css-1qrqdc1 pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:hsla(137, 100%, 55%, 0.15);}.css-1qrqdc1 pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,.css-1qrqdc1 pre.diff-highlight>code .token.token.inserted:not(.prefix) *::-moz-selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection{background-color:hsla(135, 73%, 55%, 0.25);}.css-1qrqdc1 pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,.css-1qrqdc1 pre.diff-highlight>code .token.token.inserted:not(.prefix) *::selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection,.css-1qrqdc1 pre>code.diff-highlight .token.token.inserted:not(.prefix) *::selection{background-color:hsla(135, 73%, 55%, 0.25);}.css-1qrqdc1 .prism-previewer.prism-previewer:before,.css-1qrqdc1 .prism-previewer-gradient.prism-previewer-gradient div{border-color:hsl(0, 0, 95%);}.css-1qrqdc1 .prism-previewer-color.prism-previewer-color:before,.css-1qrqdc1 .prism-previewer-gradient.prism-previewer-gradient div,.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing:before{border-radius:0.3em;}.css-1qrqdc1 .prism-previewer.prism-previewer:after{border-top-color:hsl(0, 0, 95%);}.css-1qrqdc1 .prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:hsl(0, 0, 95%);}.css-1qrqdc1 .prism-previewer-angle.prism-previewer-angle:before,.css-1qrqdc1 .prism-previewer-time.prism-previewer-time:before,.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing{background:hsl(0, 0%, 100%);}.css-1qrqdc1 .prism-previewer-angle.prism-previewer-angle circle,.css-1qrqdc1 .prism-previewer-time.prism-previewer-time circle{stroke:hsl(230, 8%, 24%);stroke-opacity:1;}.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing circle,.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing path,.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing line{stroke:hsl(230, 8%, 24%);}.css-1qrqdc1 .prism-previewer-easing.prism-previewer-easing circle{fill:transparent;}</style><div class="css-1qrqdc1"><blockquote>
<p>ì›ë¬¸: <a href="https://beta.reactjs.org/learn/synchronizing-with-effects" target="_blank" rel="noopener noreferrer">https://beta.reactjs.org/learn/synchronizing-with-effects</a></p>
</blockquote>
<p>ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë¦¬ì•¡íŠ¸ ìƒíƒœë¥¼ í†µí•´ non-ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì»¨íŠ¸ë¡¤ í•˜ê³  ì‹¶ë‹¤ë˜ê°€, ì„œë²„ì™€ ì»¤ë„¥ì…˜ì„ ì—°ë‹¤ë˜ê°€, ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ëŠ” ê²ƒë“¤ì´ ìˆë‹¤. <code>Effects</code> ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ì•¡íŠ¸ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œë“¤ê³¼ ë™ê¸°í™” í•˜ê¸° ìœ„í•´ ë Œë” ì´í›„ì— ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.</p>
<pre class="language-markdown"><code class="language-markdown code-highlight"><span class="code-line">You will learn
</span><span class="code-line">
</span><span class="code-line"><span class="token list punctuation">-</span> Effectsê°€ ë¬´ì—‡ì¸ì§€
</span><span class="code-line"><span class="token list punctuation">-</span> Effectsì™€ eventsê°€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€
</span><span class="code-line"><span class="token list punctuation">-</span> ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì–´ë–»ê²Œ ì„ ì–¸í•  ê²ƒì¸ì§€
</span><span class="code-line"><span class="token list punctuation">-</span> ì–´ë–»ê²Œ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ re-runí•˜ì§€ ì•Šë„ë¡ skip í•  ìˆ˜ ìˆëŠ”ì§€
</span><span class="code-line"><span class="token list punctuation">-</span> ì™œ EffectsëŠ” ê°œë°œ í™˜ê²½ì—ì„œ 2ë²ˆ ì‹¤í–‰ë˜ê³  ì–´ë–»ê²Œ ê³ ì¹˜ëŠ”ì§€
</span></code></pre>
<h2>Effectsì™€ eventsëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?</h2>
<p>Effectsë¥¼ ì•Œê¸° ì „ì—, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ 2ê°€ì§€ ë¡œì§ê³¼ ì¹œí•´ì ¸ì•¼ í•œë‹¤.</p>
<ul>
<li>Rendering Code(introduced in <a href="https://beta.reactjs.org/learn/describing-the-ui" target="_blank" rel="noopener noreferrer">Describing the UI</a>)ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ ë ˆë²¨ì— ìˆë‹¤. ì´ê²ƒì€ propsì™€ stateë¥¼ ë‹¤ë£¨ê³  ê·¸ê²ƒë“¤ì„ ë³€í™˜í•˜ë©°, JSXë¥¼ í™”ë©´ì— ì›í•˜ëŠ” ê³³ì— ë¦¬í„´í•˜ëŠ” ê³³ì´ë‹¤. <a href="https://beta.reactjs.org/learn/keeping-components-pure" target="_blank" rel="noopener noreferrer">Rendering code must be pure</a>. ìˆ˜í•™ ê³µì‹ì²˜ëŸ¼ ê·¸ê²ƒì€ ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒ ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤.</li>
<li><strong>Event handlers</strong>(introduced in <a href="https://beta.reactjs.org/learn/adding-interactivity" target="_blank" rel="noopener noreferrer">Adding Interactivity</a>) ëŠ” ë‹¨ìˆœ ê³„ì‚°í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ë¬´ì–¸ê°€ë¥¼ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ì¤‘ì²©ëœ í•¨ìˆ˜ë‹¤. <code>event handler</code>ëŠ” input fieldë¥¼ update í•˜ê±°ë‚˜, ì œí’ˆì„ êµ¬ë§¤í•˜ê¸° ìœ„í•´ HTTP POST ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜, ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ìœ ì €ê°€ ì´ë™í•˜ê²Œ í•  ê²ƒì´ë‹¤. <code>event handler</code> ëŠ” <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)" target="_blank" rel="noopener noreferrer">â€œside effectsâ€</a> (ì´ê²ƒì€ í”„ë¡œê·¸ë¨ì˜ ìƒíƒœë¥¼ ë°”ê¾¼ë‹¤)ë¥¼ í¬í•¨í•˜ê³  ìœ ì €ì˜ íŠ¹ë³„í•œ ì•¡ì…˜ìœ¼ë¡œ ë°œìƒí•œë‹¤.(ì˜ˆë¥¼ ë“¤ë©´ ë²„íŠ¼ í´ë¦­ì´ë‚˜ íƒ€ì´í•‘)</li>
</ul>
<p>ë•Œë•Œë¡œ ê·¸ê²ƒì€ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤. <code>ChatRoom</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ë©´, ì»´í¬ë„ŒíŠ¸ëŠ” í™”ë©´ì— ë³´ì´ì§€ ì•Šì•„ë„ chat serverì™€ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ì„œë²„ì™€ ì—°ê²°í•˜ëŠ” ê²ƒì€ <code>pure calculation</code> ì´ ì•„ë‹ˆë¯€ë¡œ(side effectì„) ê·¸ê²ƒì€ ë Œë”ë§ ë„ì¤‘ì— ì¼ì–´ë‚  ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ <code>ChatRoom</code> ì„ ë³´ì´ê²Œ í•˜ëŠ” í´ë¦­ê³¼ ê°™ì€ íŠ¹ì • ì´ë²¤íŠ¸ëŠ” ì—†ë‹¤.</p>
<p><strong>Effectsë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” side effectsë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</strong> ì±„íŒ…ì°½ì—ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒì€ ìœ ì €ê°€ ë²„íŠ¼ì„ í´ë¦­í•¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ë‹¤. í•˜ì§€ë§Œ ì„œë²„ ì»¤ë„¥ì…˜ì„ ì„¸íŒ…í•˜ëŠ” ê²ƒì€ ì–´ë–¤ ì¸í„°ë™ì…˜ê³¼ ìƒê´€ì—†ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— <code>Effect</code> ì´ë‹¤. EffectëŠ” í™”ë©´ì˜ ì—…ë°ì´íŠ¸ì˜ ë§ˆì§€ë§‰ <a href="https://beta.reactjs.org/learn/render-and-commit" target="_blank" rel="noopener noreferrer">rendering process</a> ì— ì‹¤í–‰ëœë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ë„¤íŠ¸ì›Œí¬ë‚˜ ì„œë“œíŒŒí‹°)ì™€ ë™ê¸°í™”í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°ì´ë‹¤.</p>
<blockquote>
<p>ğŸ’¡ NOTE</p>
<p>ì´ ì•„ë˜ì—ì„œ ë¶€í„°ëŠ” capitalized â€œEffectâ€ëŠ” ìœ„ì—ì„œ Reactì™€ ê´€ë ¨ìˆëŠ” Effectë¥¼ ë§í•œë‹¤. ë‹¤ì‹œ ë§í•´ì„œ ë Œë”ë§ìœ¼ë¡œ ì¸í•œ side effectë¥¼ ë§í•œë‹¤. í­ë„“ì€ í”„ë¡œê·¸ë˜ë° ê°œë…ìœ¼ë¡œëŠ” ìš°ë¦¬ëŠ” â€œside effectâ€ë¼ê³  ë¶€ë¥¼ ê²ƒì´ë‹¤.</p>
</blockquote>
<h2>ë„ˆëŠ” ì•„ë§ˆë„ Effectê°€ í•„ìš”ì—†ë‹¤.</h2>
<p>ì»´í¬ë„ŒíŠ¸ì— Effectsë¥¼ ë¬´ì‘ì • ì¶”ê°€í•˜ì§€ ë§ˆë¼. EffectsëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ â€œì ê¹â€ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë¸Œë¼ìš°ì € APIë‚˜ ì„œë“œíŒŒí‹° ìœ„ì ¯, ë„¤íŠ¸ì›Œí¬ ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹í•œë‹¤. ë§Œì•½ ë„ˆì˜ effectê°€ ì–´ë–¤ ìƒíƒœì— ê¸°ë°˜í•œ ìƒíƒœë§Œì„ ì¡°ì •í•œë‹¤ë©´, <a href="https://beta.reactjs.org/learn/you-might-not-need-an-effect" target="_blank" rel="noopener noreferrer">you might not need an Effect.</a></p>
<h2>Effectë¥¼ ì“°ëŠ” ë°©ë²•</h2>
<p>Effectë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ ì„¸ ìŠ¤í…ì„ ë”°ë¼ë¼.</p>
<ol>
<li><strong>Effectë¥¼ ì •ì˜í•´ë¼</strong>. ê¸°ë³¸ì ìœ¼ë¡œ ë„ˆì˜ EffectëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ì‹¤í–‰ë  ê²ƒì´ë‹¤.</li>
<li><strong>Effectì˜ dependenciesë¥¼ ëª…ì‹œí•´ë¼.</strong> ëŒ€ë¶€ë¶„ì˜ EffectsëŠ” ë§¤ë²ˆ ë Œë”ë˜ê¸° ë³´ë‹¤ëŠ” í•„ìš”í•  ë•Œë§Œ re-render ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œë§Œ ë™ì‘í•´ì•¼ í•œë‹¤. ì±„íŒ…ë°©ì„ ì—°ê²°í•˜ê³  í•´ì œí•˜ëŠ” ì¼ì€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ˆ ë•Œë‚˜ ì±„íŒ…ë°©ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ ì¼ì–´ë‚˜ì•¼ í•œë‹¤. dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ ì´ê²ƒì„ ì–´ë–»ê²Œ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê²ƒì¸ì§€ ë°°ìš¸ ê²ƒì´ë‹¤.</li>
<li>í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•´ë¼. ì–´ë–¤ EffectsëŠ” ê·¸ê²ƒì´ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦¬ê±°ë‚˜ clean up í•˜ëŠ” ë²•ì„ í•  ì§€ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code>connect</code> ëŠ” <code>disconnect</code>, <code>subscribe</code> ëŠ” <code>unsubscribe</code> ê·¸ë¦¬ê³  <code>fetch</code> ëŠ” <code>cancel</code> ì´ë‚˜ <code>ignore</code> ê°€ í•„ìš”í•˜ë‹¤. cleanup functionì„ ë¦¬í„´í•¨ìœ¼ë¡œì¨ ì´ë ‡ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ê²ƒì´ë‹¤.</li>
</ol>
<p>ìì„¸íˆ ì•Œì•„ë³´ì.</p>
<h2>Step 1: Effectë¥¼ ì •ì˜í•´ë¼</h2>
<p>ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” useEffect Hookì„ import í•˜ì:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ë ˆë²¨ì—ì„œ ì´ ì½”ë“œê°€ ì¶”ê°€ëœ ì´í™íŠ¸ë¥¼ í˜¸ì¶œí•˜ì:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// Code here will run after *every* render</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”í•  ë•Œ ë§ˆë‹¤ ReactëŠ” ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ê³  useEffect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë‹¤ì‹œ ë§í•´ì„œ useEffectëŠ” í™”ë©´ì—ì„œ ë Œë”ë§ì´ ë°˜ì˜ë  ë•Œ ê¹Œì§€ ì½”ë“œ ì¡°ê°ë“¤ì„ ì§€ì—°í•œë‹¤.</p>
<p>Effectë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ì. <code>&#x3C;VideoPlayer></code> ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ì— <code>isPlaying</code> propì„ ë„˜ê²¨ì„œ ì¬ìƒí•˜ê±°ë‚˜ ë©ˆì¶”ê²Œ ì»¨íŠ¸ë¡¤í•œë‹¤ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">VideoPlayer</span></span> <span class="token attr-name">isPlaying</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isPlaying<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
</span></code></pre>
<p>VideoPlayer ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì € <code>&#x3C;video></code> íƒœê·¸ë¥¼ ë Œë”í•œë‹¤:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">VideoPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> src<span class="token punctuation">,</span> isPlaying <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// TODO: do something with isPlaying</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>video</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>src<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>í•˜ì§€ë§Œ ë¸Œë¼ìš°ì €ì˜ <code>&#x3C;video></code> tagëŠ” <code>isPlaying</code> propì´ ì—†ë‹¤. ìœ ì¼í•˜ê²Œ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ìˆ˜ë™ìœ¼ë¡œ DOM elementì˜ play()ì™€ pause() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ë™ì˜ìƒì„ ì¬ìƒí•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” isPlaying propê³¼ play, pause ê°™ì€ í•„ìˆ˜ í˜¸ì¶œê³¼ ë™ê¸°í™” í•´ì•¼í•œë‹¤.</p>
<p>ìš°ë¦¬ëŠ” <code>&#x3C;video></code> DOM nodeì˜ refë¥¼ ì–»ì–´ì•¼ í•œë‹¤.</p>
<p>playë‚˜ pauseë¥¼ ë Œë”ë§ ì¤‘ì— í˜¸ì¶œí•˜ê³  ì‹¶ì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ê·¸ê²ƒì€ ì˜ëª»ëë‹¤.</p>
<p>ì´ ì½”ë“œê°€ í‹€ë¦° ì´ìœ ëŠ” DOM nodeê°€ ë Œë”ë§ ì¤‘ì— ë­”ê°€ë¥¼ í•˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œëŠ” JSXì˜ ë Œë”ë§ì€ ìˆœìˆ˜ í•¨ìˆ˜ì´ì–´ì•¼ í•˜ë©° DOMì„ ìˆ˜ì •í•˜ëŠ” ê²ƒ ê°™ì€ side effectsë¥¼ í¬í•¨í•˜ë©´ ì•ˆëœë‹¤.</p>
<p>ê²Œë‹¤ê°€ VideoPlayerê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ ê·¸ê²ƒì˜ DOMì€ ì•„ì§ ì—†ë‹¤! playë‚˜ pauseë¥¼ í˜¸ì¶œí•  DOM nodeê°€ ì•„ì§ ì—†ë‹¤. ì™œë‚˜í•˜ë©´ ë¦¬ì•¡íŠ¸ëŠ” JSXê°€ ë¦¬í„´í•˜ê¸° ì „ ê¹Œì§€ ìƒì„±ë  DOMì— ëŒ€í•´ì„œ ëª¨ë¥¸ë‹¤.</p>
<p>ë°©ë²•ì€ ë Œë”ë§ ê³„ì‚°ì—ì„œ side effectë¥¼ ë°–ìœ¼ë¡œ êº¼ë‚´ê¸° ìœ„í•´ useEffectë¡œ ë˜í•‘í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">VideoPlayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> src<span class="token punctuation">,</span> isPlaying <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">.</span><span class="token method function property-access">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">.</span><span class="token method function property-access">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>video</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>src<span class="token punctuation">}</span></span> <span class="token attr-name">loop</span> <span class="token attr-name">playsInline</span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Effect ì•ˆì—ì„œ DOM updateë¥¼ ë˜í•‘í•¨ìœ¼ë¡œì¨ ë¦¬ì•¡íŠ¸ê°€ í™”ë©´ì„ ë¨¼ì € ì—…ë°ì´íŠ¸ í•˜ê²Œ í–ˆë‹¤. ê·¸ë¦¬ê³  Effectê°€ ì‹¤í–‰ëœë‹¤.</p>
<p><code>VideoPlayer</code> ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë  ë•Œ(ì²« renderë‚˜ re-renderë“ ) ëª‡ê°€ì§€ ì¼ì´ ì¼ì–´ë‚œë‹¤. ë¨¼ì € ë¦¬ì•¡íŠ¸ê°€ ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ë©° ì˜¬ë°”ë¥¸ propìœ¼ë¡œ DOMì— <code>&#x3C;video></code> íƒœê·¸ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê·¸ë¦¬ê³  ë¦¬ì•¡íŠ¸ëŠ” Effectë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ EffectëŠ” playë‚˜ pauseë¥¼ isPlaying propì— ë”°ë¼ í˜¸ì¶œí•  ê²ƒì´ë‹¤.</p>
<p>Play/Puaseë¥¼ ì—¬ëŸ¬ ë²ˆ ëˆ„ë¥´ê³  video playerê°€ isPlaying ê°’ê³¼ ì–´ë–»ê²Œ ë™ê¸°í™”ë˜ëŠ”ì§€ ë³´ì.</p>
<p>ì˜ˆì œì—ì„œ ë¦¬ì•¡íŠ¸ ìƒíƒœì™€ ë™ê¸°í™”ëœ â€œì™¸ë¶€ ì‹œìŠ¤í…œâ€ì€ ë¸Œë¼ìš°ì € media API ì˜€ë‹¤. ë¹„ìŠ·í•œ ì ‘ê·¼ë²•ì„ ì„ ì–¸ì  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— legacy non-ë¦¬ì•¡íŠ¸ ì½”ë“œ(jQuery plugin ê°™ì€)ë¥¼ ë˜í•‘í•˜ì—¬ ì ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<p>ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ë¥¼ ì»¨íŠ¸ë¡¤í•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œ ë” ë³µì¡í•˜ë‹¤. playë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ ë‚´ì¥ ë¸Œë¼ìš°ì € ì»¨íŠ¸ë¡¤ë¡œ play í˜¹ì€ pause í•  ìˆ˜ ìˆë‹¤. ì´ ì˜ˆì œëŠ” ë§¤ìš° ë‹¨ìˆœí•˜ê³  ë¶ˆì™„ì „í•˜ë‹¤.</p>
<blockquote>
<p>ğŸ’¡ Pitfall
ê¸°ë³¸ì ìœ¼ë¡œ EffectsëŠ” ë§¤ ë Œë” í›„ì— ì‹¤í–‰ëœë‹¤. ì´ ë§ì€ ì™œ ì•„ë˜ì˜ ì½”ë“œê°€ ë¬´í•œë£¨í”„ë¥¼ ë°œìƒí•˜ëŠ” ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>EffectsëŠ” ë Œë”ë§ì˜ ê²°ê³¼ë¡œ ì‹¤í–‰í•œë‹¤. ìƒíƒœë¥¼ setí•˜ëŠ” ê²ƒì€ ë Œë”ë§ì„ ë°œìƒì‹œí‚¨ë‹¤. Effect ì•ˆì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ setí•˜ëŠ” ê²ƒì€ ì „ì› ë‹¨ìë¥¼ ìŠ¤ìŠ¤ë¡œ í”ŒëŸ¬ê·¸ë¥¼ ê½ƒëŠ” ê²ƒê³¼ ê°™ë‹¤. Effectê°€ ì‹¤í–‰ë˜ë©´, ìƒíƒœë¥¼ setí•˜ê³  ì´ê²ƒì€ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ì´ê²ƒì€ Effectë¥¼ ì‹¤í–‰í•˜ê³ , ìƒíƒœë¥¼ ë‹¤ì‹œ setí•˜ê³  ë˜ ë‹¤ë¥¸ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
EffectsëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë§Œì•½ ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ê³  ë‹¨ìˆœíˆ ìƒíƒœë¥¼ ì¡°ì •í•˜ê¸° ìœ„í•´ Effectë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Effectê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²ƒì´ë‹¤.</p>
</blockquote>
<h2>Step 2: Effectì˜ dependenciesë¥¼ ëª…ì‹œí•˜ì</h2>
<p>ê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ë§¤ ë Œë” ì´í›„ì— ì‹¤í–‰ëœë‹¤. ì¢…ì¢… ê·¸ê²ƒì€ ì›ì¹˜ ì•Šë˜ ê²ƒì´ë‹¤.</p>
<ul>
<li>ê°€ë”, ëŠë¦¬ë‹¤. ì™¸ë¶€ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ í•­ìƒ ì¦‰ì‹œì¸ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•„ìš”í•  ë•Œ ê¹Œì§€ ìŠ¤í‚µí•˜ê¸¸ ì›í•  ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë§¤ íƒ€ì´í•‘ë§ˆë‹¤ ì±— ì„œë²„ì™€ ì¬ì—°ê²° í•˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤.</li>
<li>ê°€ë” í‹€ë¦°ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì„ ëª¨ë“  íƒ€ì´í•‘ì— ë™ì‘í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì• ë‹ˆë©”ì´ì…˜ì€ ìµœì´ˆì— ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œ í•œë²ˆë§Œ ë™ì‘í•´ì•¼ í•œë‹¤.</li>
</ul>
<p>ì´ í˜„ìƒì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì•„ê¹Œì˜ ì˜ˆì œë¥¼ ëª‡ê°œì˜ console.log í˜¸ì¶œê³¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” text input ì´ ìˆë‹¤. íƒ€ì´í•‘í•  ë•Œ Effectê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì.</p>
<p><a href="https://codesandbox.io/s/8jyd5t?file=%2FApp.js&#x26;from-sandpack=true" target="_blank" rel="noopener noreferrer">playground example</a></p>
<p>useEffect í˜¸ì¶œì˜ ë‘ë²ˆì§¸ ì¸ìë¡œ dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì¬ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤. ë¹ˆ <code>[]</code> ë°°ì—´ì„ ì¶”ê°€í•´ë³´ì.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><code>React Hook useEffect has a missing dependency: 'isPlaying'</code> ë¼ëŠ” ì—ëŸ¬ë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>
<p>ë¬¸ì œëŠ” isPlaying propì— ì˜ì¡´í•˜ëŠ” effect ë‚´ë¶€ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•  ì§€ ì •í•˜ì§€ë§Œ ì´ dependencyëŠ” ì™¸ë¶€ì— ì •ì˜ë˜ì§€ ì•Šì•˜ë‹¤. ì´ê±¸ ê³ ì¹˜ê¸° ìœ„í•´ì„œëŠ” <code>isPlaying</code>ì„ dependency arrayì— ì¶”ê°€í•˜ì.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>isPlaying<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// It's used here...</span>
</span><span class="code-line">    <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>isPlaying<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ...so it must be declared here!</span>
</span></code></pre>
<p>ì´ì œ ëª¨ë“  ì˜ì¡´ì„±ë“¤ì´ ì •ì˜ë˜ì–´ì„œ ì—ëŸ¬ê°€ ì—†ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì— <code>[isPlaying]</code> ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ <code>isPlaying</code> ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ ì¬ì‹¤í–‰ ë˜ëŠ” ê²ƒì„ skip í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ ë³€í™”ë¡œ inputì— íƒ€ì´í•‘í•˜ëŠ” ê²ƒì€ effectê°€ ì¬ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Play/Pauseë¥¼ í´ë¦­í•˜ëŠ” ê²ƒì€ ì¬ì‹¤í–‰ëœë‹¤.</p>
<p>ì˜ì¡´ì„± ë°°ì—´ì€ ì—¬ëŸ¬ê°œì˜ ì˜ì¡´ì„±ë“¤ì„ ê°–ì„ ìˆ˜ ìˆë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ëª…ì‹œëœ ëª¨ë“  ì˜ì¡´ì„±ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ Effectë¥¼ ì¬ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì˜ì¡´ì„± ê°’ì„ <code>[Object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)</code> ë¡œ ë¹„êµí•œë‹¤. useEffect API referenceì—ì„œ ë” ìì„¸íˆ ë³¼ ìˆ˜ ìˆìŒ</p>
<p>ì˜ì¡´ì„±ì„ â€œì„ íƒ"í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë§Œì•½ ëª…ì‹œí•œ ì˜ì¡´ì„±ì´ ë¦¬ì•¡íŠ¸ê°€ ì˜ˆìƒí•œ Effect ë‚´ë¶€ì˜ ì½”ë“œì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Lint errorë¥¼ ë³´ê²Œ ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ ì½”ë“œì—ì„œ ë§ì€ ë²„ê·¸ë¥¼ ì¡ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤. ë§Œì•½ Effectê°€ ëª‡ëª‡ ê°’ì„ ì´ìš©í•˜ì§€ë§Œ ê·¸ê²ƒì´ ë³€í•  ë•Œ ë§ˆë‹¤ ì¬ì‹¤í–‰ë˜ì§€ ì•Šê¸¸ ë°”ë€ë‹¤ë©´ Effect code ìŠ¤ìŠ¤ë¡œê°€ ê·¸ ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.</p>
<blockquote>
<p>ğŸ’¡ Pitfall
ì˜ì¡´ì„± ë°°ì—´ì´ ìˆëŠ” ê²½ìš°ì™€ ì—†ëŠ” ê²½ìš° ë™ì‘ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// This runs after every render</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// This runs only on mount (when the component appears)</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// This runs on mount *and also* if either a or b have changed since the last render</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ë‹¤ìŒ ìŠ¤í…ì—ì„œ mountë¥¼ ìì„¸íˆ ì‚´í´ë³´ì</p>
</blockquote>
<h2>Step 3: í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•˜ì</h2>
<p>ë‹¤ë¥¸ ì˜ˆì œë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ chat serverì™€ ì—°ê²°í•  í•„ìš”ê°€ ìˆëŠ” <code>ChatRoom</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆë‹¤. connectì™€ disconnectë¼ëŠ” ë©”ì†Œë“œë¥¼ í¬í•¨í•œ objectë¥¼ ë¦¬í„´í•˜ëŠ” <code>createConnection</code> ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ìœ ì €ì—ê²Œ ë³´ì—¬ì§ˆ ë•Œë§Œ ì—°ê²°ì„ ìœ ì§€í•  ìˆ˜ ìˆì„ê¹Œ?</p>
<p>Effect ì‘ì„± ë¶€í„° ì‹œì‘:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  connection<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ë§¤ë²ˆ ë Œë”í•  ë•Œ ë§ˆë‹¤ ì—°ê²°í•˜ëŠ” ê²ƒì€ ëŠë¦´í…Œë‹ˆê¹Œ, ì˜ì¡´ì„± ë°°ì—´ì„ ì¶”ê°€í•˜ì.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  connection<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Effect ë‚´ë¶€ì˜ ì½”ë“œëŠ” ì–´ë–¤ propsë‚˜ stateë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì˜ì¡´ì„± ë°°ì—´ì€ <code>[]</code> ë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ mount ë˜ì—ˆì„ ë•Œ Effectë¥¼ ì‹¤í–‰í•  ê²ƒì„ ë§í•œë‹¤. (í™”ë©´ì— ì²˜ìŒ ë‚˜íƒ€ë‚¬ì„ ë•Œ)</p>
<p>ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì</p>
<p><a href="https://codesandbox.io/s/ivqrgu?file=%2FApp.js&#x26;from-sandpack=true" target="_blank" rel="noopener noreferrer">playground example</a></p>
<p>ì´ EffectëŠ” ì˜¤ì§ mount ëì„ ë•Œë§Œ ì‹¤í–‰í•˜ë¯€ë¡œ â€œConnectingâ€¦â€ ì„ í•œë²ˆ ì¶œë ¥í•  ê²ƒì„ ì˜ˆìƒí–ˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ consoleì„ í™•ì¸í•´ë³´ë©´ 2ë²ˆ ì¶œë ¥ëœë‹¤. ì™œ ê·¸ëŸ´ê¹Œ?</p>
<p><code>ChatRoom</code> ì»´í¬ë„ŒíŠ¸ê°€ ì—¬ëŸ¬ ê°œì˜ ë‹¤ë¥¸ í™”ë©´ì´ ìˆëŠ” í° ì•±ì˜ ì¼ë¶€ë¶„ì´ë¼ê³  ìƒê°í•´ë³´ì. ìœ ì €ëŠ” <code>ChatRoom</code> í˜ì´ì§€ì—ì„œ ê·¸ë“¤ì˜ ì—¬ì •ì„ ì‹œì‘í•œë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ëŠ” mount ë˜ê³  <code>connection.connect</code> ë¥¼ í˜¸ì¶œí•œë‹¤. ê·¸ë¦¬ê³  ìœ ì €ê°€ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•œë‹¤ê³  ìƒê°í•´ë³´ìâ€”ì˜ˆë¥¼ ë“¤ì–´ í™˜ê²½ ì„¤ì • í˜ì´ì§€. ì´ <code>ChatRoom</code> ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ëœë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ ì €ëŠ” ë’¤ë¡œê°€ê¸°ë¥¼ í´ë¦­í•˜ê³  <code>ChatRoom</code> ì´ ë‹¤ì‹œ mount ëœë‹¤. ì´ê²ƒì€ ë‘ ë²ˆì§¸ connectionì„ ì—°ê²°í•œë‹¤â€”í•˜ì§€ë§Œ ì²« ë²ˆì§¸ ì»¤ë„¥ì€ ì•„ì§ ì‚¬ë¼ì§€ì§€ ì•Šì•˜ë‹¤! ìœ ì €ê°€ ì•±ì„ ë„˜ë‚˜ë“¤ë©´ connectionì€ ê³„ì† ìŒ“ì¼ ê²ƒì´ë‹¤.</p>
<p>ì¼ì¼ì´ ê´‘ë²”ìœ„í•œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šê³ ì„œëŠ” ì´ëŸ° ë²„ê·¸ë“¤ì€ ë†“ì¹˜ê¸° ì‰½ë‹¤. ì´ëŸ° ê²ƒì„ ë¹¨ë¦¬ ì•Œê¸° ìœ„í•´ ë¦¬ì•¡íŠ¸ ê°œë°œ ëª¨ë“œì—ì„œëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì²« mount í›„ ë‹¤ì‹œ í•œë²ˆ mount í•œë‹¤. â€œConnectingâ€¦â€ ì´ 2ë²ˆ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì€ ì§„ì§œ ì´ìŠˆ:ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ê°€ unmount ëì„ ë•Œ connectionì„ closeí•˜ì§€ ì•Šì•˜ìŒì„ ë¹¨ë¦¬ ì•Œ ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.</p>
<p>ì´ ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Effectì— cleanup functionì„ returní•˜ì:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  connection<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    connection<span class="token punctuation">.</span><span class="token method function property-access">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ë¦¬ì•¡íŠ¸ëŠ” cleanup functionì„ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê¸° ì „ì— í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ê°€ unmount(ì‚­ì œë  ë•Œ) ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ í˜¸ì¶œí•  ê²ƒì´ë‹¤. cleanup functionì´ êµ¬í˜„ë˜ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>
<p><a href="https://codesandbox.io/s/oil0if?file=%2FApp.js&#x26;from-sandpack=true" target="_blank" rel="noopener noreferrer">playground example</a></p>
<p>developmodeì—ì„œ 3ê°œì˜ ì½˜ì†” ë¡œê·¸ë¥¼ ë³¼ ê²ƒì´ë‹¤.</p>
<ol>
<li><code>"Connecting..."</code></li>
<li><code>"Disconnected."</code></li>
<li><code>"Connecting..."</code></li>
</ol>
<p>ì´ê²ƒì€ ê°œë°œ ëª¨ë“œì—ì„œ ì˜¬ë°”ë¥¸ ë™ì‘ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ mountí•˜ë©´ì„œ, ë¦¬ì•¡íŠ¸ëŠ” ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ ì™€ë„ ì½”ë“œê°€ ë¬´ë„ˆì§€ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•œë‹¤. ì—°ê²°ì„ í•´ì œí•˜ê³  ë‹¤ì‹œ ì—°ê²°í•˜ëŠ” ê²ƒì€ ì •í™•íˆ ì¼ì–´ë‚˜ëŠ” ì¼ì´ë‹¤! cleanup ì„ ì˜ êµ¬í˜„í•œë‹¤ë©´, Effectë¥¼ í•œë²ˆ ì‹¤í–‰í•˜ê³  cleanupí•˜ê³ , ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ìœ ì €ê°€ ë³¼ ìˆ˜ ì—†ëŠ” ì°¨ì´ì¼ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ê°€ ê°œë°œí™˜ê²½ì—ì„œ ë‹ˆ ì½”ë“œì— ë²„ê·¸ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì¡°ì‚¬í•˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ connect/disconnect í˜¸ì¶œì„ í•œë‹¤. ì´ê²ƒì€ ì¼ë°˜ì ì´ê³  ì—†ì• ë ¤ê³  í•˜ë©´ ì•ˆëœë‹¤.</p>
<p>í”„ë¡œë•ì…˜ì—ì„œëŠ” <code>"Connecting..."</code> ì´ í•œë²ˆë§Œ ì¶œë ¥ë  ê²ƒì´ë‹¤. í•œë²ˆ ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸í•˜ëŠ” ê²ƒì€ ê°œë°œí™˜ê²½ì—ì„œ Effectì— cleanupì´ í•„ìš”í•˜ë‹¤ëŠ” ê±¸ ì°¾ëŠ” ê²ƒì„ ë„ì™€ì£¼ê¸° ìœ„í•´ì„œì´ë‹¤. ì´ëŸ° ê°œë°œ ë™ì‘ì„ ì—†ì• ê¸° ìœ„í•´ Strict Modeë¥¼ ëŒ ìˆ˜ ìˆì§€ë§Œ ê³„ì† ì¼œì ¸ìˆê¸°ë¥¼ ê¶Œì¥í•œë‹¤. ìœ„ì™€ ê°™ì€ ë²„ê·¸ë¥¼ ë§ì´ ì°¾ê²Œ í•´ì¤€ë‹¤.</p>
<h2>Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ê°€?</h2>
<p>ë¦¬ì•¡íŠ¸ëŠ” ì˜ë„ì ìœ¼ë¡œ ìœ„ì˜ ì˜ˆì œ ì²˜ëŸ¼ ë²„ê·¸ë¥¼ ì°¾ê¸° ì‰½ë„ë¡ ê°œë°œí™˜ê²½ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ remount í•œë‹¤. ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì€ <strong>â€œEffectë¥¼ í•œë²ˆë§Œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•â€ì´ ì•„ë‹ˆë¼ â€œEffectê°€ remount í›„ì—ë„ ì˜ ë™ì‘í•˜ë„ë¡ ê³ ì¹˜ëŠ” ë°©ë²•â€ ì´ì–´ì•¼ í•œë‹¤.</strong> ë³´í†µ ì •ë‹µì€ cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤. cleanup functionì€ Effectì˜ ë™ì‘ì„ Effectê°€ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦´ ê²ƒì´ë‹¤. ì œ 1ì˜ ê·œì¹™ì€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ Effectê°€ í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ê°œë°œ í™˜ê²½ì—ì„œ effect â†’ cleanup â†’ effect í•˜ëŠ” ë™ì•ˆ ìœ ì €ê°€ ê·¸ê²ƒì„ ì‹ë³„í•  ìˆ˜ ì—†ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<p>ëŒ€ë¶€ë¶„ì˜ ì‘ì„±ë  Effect ì•„ë˜ì˜ ì¼ë°˜ì ì¸ íŒ¨í„´ì— ì†í•  ê²ƒì´ë‹¤.</p>
<h2>Non-React ìœ„ì ¯ ë‹¤ë£¨ê¸°</h2>
<p>ê°€ë” Reactë¡œ ì‘ì„±ë˜ì§€ ì•Šì€ UI ìœ„ì ¯ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ map ì»´í¬ë„ŒíŠ¸ë¥¼ í˜ì´ì§€ì— ì¶”ê°€í•œë‹¤ê³  í•´ë³´ì. <code>setZoomLevel</code> ì´ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆê³  ë¦¬ì•¡íŠ¸ ì½”ë“œì—ì„œ <code>zoomLevel</code>ì˜ ìƒíƒœ ê°’ì„ í†µí•´ zoom levelì„ ë™ê¸°í™” í•˜ê³  ì‹¶ë‹¤. EffectëŠ” ì´ë ‡ê²Œ ìƒê²¼ì„ ê²ƒì´ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> map <span class="token operator">=</span> mapRef<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
</span><span class="code-line">  map<span class="token punctuation">.</span><span class="token method function property-access">setZoomLevel</span><span class="token punctuation">(</span>zoomLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>zoomLevel<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ì´ ê²½ìš°ì—ëŠ” cleanup ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ê°œë°œ ëª¨ë“œì—ì„œëŠ” ë¦¬ì•¡íŠ¸ê°€ Effectë¥¼ 2ë²ˆ í˜¸ì¶œí•  ê²ƒì´ì§€ë§Œ ì´ê²ƒì€ setZoomLevelì´ ê°™ì€ ê°’ìœ¼ë¡œ 2ë²ˆ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì•„ë‹ˆë‹¤. ì¡°ê¸ˆì€ ëŠë¦´ ìˆ˜ ìˆì§€ë§Œ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ê·¸ë ‡ì§€ í”„ë¡œë•ì…˜ì—ì„  ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<p>ì–´ë–¤ APIëŠ” í•œë²ˆì— í•¨ìˆ˜ë¥¼ 2ë²ˆ í˜¸ì¶œí•˜ë„ë¡ í—ˆë½í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ <code>&#x3C;dialog></code> elementì˜ ë‚´ì¥ í•¨ìˆ˜ì¸ <code>showModal</code> í•¨ìˆ˜ëŠ” 2ë²ˆ í˜¸ì¶œí•œë‹¤ë©´ ì—ëŸ¬ë¥¼ ë±‰ì„ ê²ƒì´ë‹¤. cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ dialogë¥¼ ë‹«ê²Œ í•œë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> dialog <span class="token operator">=</span> dialogRef<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
</span><span class="code-line">  dialog<span class="token punctuation">.</span><span class="token method function property-access">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> dialog<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ê°œë°œ í™˜ê²½ì—ì„œ, EffectëŠ” showModal()ì„ í˜¸ì¶œí•˜ê³  ì¦‰ì‹œ close() ê·¸ë¦¬ê³ ëŠ” showModal()ì„ ë‹¤ì‹œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ì´ ë™ì‘ì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©ìê°€ showModalì„ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ë™ì‘ê³¼ ê°™ë‹¤.</p>
<h2>ì´ë²¤íŠ¸ êµ¬ë…í•˜ê¸°</h2>
<p>ë§Œì•½ Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•˜ê³  ìˆë‹¤ë©´ cleanup functionì€ êµ¬ë… ì·¨ì†Œë¥¼ í•´ì•¼í•œë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">function</span> <span class="token function">handleScroll</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">clientX</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token property-access">clientY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"scroll"</span><span class="token punctuation">,</span> handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ê°œë°œ í™˜ê²½ì—ì„œ EffectëŠ” addEventListener(), removeEventListener() ê·¸ë¦¬ê³  ë‹¤ì‹œ addEventListener()ë¥¼ ê°™ì€ í•¸ë“¤ëŸ¬ë¡œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ í•˜ë‚˜ì˜ í™œì„± êµ¬ë…ë§Œ í•œ ì‹œê°„ì— ì¡´ì¬í•œë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ addEventListenerë¥¼ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.</p>
<h2>ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°</h2>
<p>ë§Œì•½ Effectì— ì• ë‹ˆë©”ì´ì…˜ì´ ìˆë‹¤ë©´ cleanup functionì´ ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> node <span class="token operator">=</span> ref<span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span>
</span><span class="code-line">  node<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">opacity</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Trigger the animation</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    node<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">opacity</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Reset to the initial value</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ê°œë°œ í™˜ê²½ì—ì„œ opacirtyëŠ” 1ë¡œ ì„¤ì •ëë‹¤ê°€, 0 ê·¸ë¦¬ê³  ë‹¤ì‹œ 1ë¡œ ì„¤ì •ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ opacityë¥¼ 1ë¡œ ë°”ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë§Œì•½ ì„œë“œíŒŒí‹° ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ tweeningë„ ì§€ì›í•œë‹¤ë©´ cleanup functionì€ tweenì˜ ì‹œê°„ ì„¤ì •ë„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.</p>
<h2>ë°ì´í„° fetching</h2>
<p>Effectê°€ ë¬´ì–¸ê°€ë¥¼ fetching í•œë‹¤ë©´ cleanup functionì€ fetchë¥¼ abortí•˜ê±°ë‚˜ ë¬´ì‹œí•´ì•¼ í•œë‹¤:</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">let</span> ignore <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">startFetching</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchTodos</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">setTodos</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">startFetching</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    ignore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>userId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì´ë¯¸ ì¼ì–´ë‚¬ê¸° ë•Œë¬¸ì— â€œundoâ€ í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ cleanup functionì€ ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ” fetchê°€ ì•±ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, userIdê°€ Aliceì—ì„œ Bobìœ¼ë¡œ ë°”ë€ŒëŠ” ê²½ìš° cleanupì€ Aliceì˜ reponseëŠ” Bob ë‹¤ìŒ ë„ì°©í•˜ë”ë¼ë„ ë¬´ì‹œí•´ì•¼ í•œë‹¤.</p>
<p>ê°œë°œ í™˜ê²½ì—ì„œëŠ”, ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ 2ê°œì˜ fetchë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì˜ëª»ëœ ê²ƒì€ ì—†ë‹¤. ìœ„ì™€ ê°™ì€ ì ‘ê·¼ë²•ìœ¼ë¡œ ì²« ë²ˆì§¸ ErffectëŠ” ì¦‰ì‹œ cleaned up ë  ê²ƒì´ê³  ignore ë³€ìˆ˜ì˜ ë³µì‚¬ë³¸ì€ trueê°€ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì¶”ê°€ì ì¸ ìš”ì²­ì´ ìˆë”ë¼ë„ if(!ignore) check ë•ë¶„ì— ìƒíƒœì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.</p>
<p>í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ìˆì„ ê²ƒì´ë‹¤. ë§Œì•½ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê°œë°œ í™˜ê²½ì—ì„œ ê·€ì°®ê²Œ í•œë‹¤ë©´ ê°€ì¥ ì¢‹ì€ ì ‘ê·¼ ë°©ë²•ì€ ì¤‘ë³µëœ ìš”ì²­ê³¼ ìºì‹œë¥¼ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">TodoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> todos <span class="token operator">=</span> <span class="token function">useSomeDataLibrary</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/todos</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span></code></pre>
<p>ì´ê²ƒì€ ê°œë°œ ê²½í—˜ì„ ìƒìŠ¹ì‹œí‚¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì•±ì„ ë” ë¹ ë¥´ê²Œ ë§Œë“ ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìœ ì €ëŠ” ë°ì´í„°ê°€ ìºì‹œë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¡œë“œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤. ìŠ¤ìŠ¤ë¡œ ìºì‹œë¥¼ ë§Œë“¤ì–´ë„ ë˜ê³  Effect ì—ì„œ ì†ìˆ˜ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ì—¬ëŸ¬ ê°€ì§€ ëŒ€ì²´ì¬ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>
<h2>ë¶„ì„ ë³´ë‚´ê¸°</h2>
<p>ì´ ì½”ë“œê°€ í˜ì´ì§€ ë°©ë¬¸í•  ë•Œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤ê³  ìƒê°í•´ë³´ì.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">logVisit</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sends a POST request</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ê°œë°œ í™˜ê²½ì—ì„œëŠ”, <code>logVisit</code> ì´ ëª¨ë“  URL ë§ˆë‹¤ 2ë²ˆ ìš”ì²­í•  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤. <strong>ì½”ë“œ ê·¸ëŒ€ë¡œ ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ì•ì˜ ì˜ˆì œ ì²˜ëŸ¼ <code>í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ë‘ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì—ì„œ ìœ ì €ê°€ ì°¨ì´ë¥¼ ëŠë‚„ ìˆ˜ ì—†ë‹¤.</code></strong> ì‹¤ì œì˜ ê´€ì ì—ì„œ ë³´ë©´, ê°œë°œ í™˜ê²½ì´ í”„ë¡œë•ì…˜ì˜ ì§€í‘œë¥¼ ì˜¤ì—¼ì‹œí‚¤ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì—<code>logVisit</code> ì€ ê°œë°œ í™˜ê²½ì—ì„œ ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” íŒŒì¼ì„ ì €ì¥í•  ë•Œ ë§ˆë‹¤ remount ë˜ë¯€ë¡œ ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì–´ì°¨í”¼ ì—¬ëŸ¬ë²ˆ ë³´ë‚¸ë‹¤.</p>
<p><strong>í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¤‘ë³µëœ visit logê°€ ì—†ë‹¤.</strong></p>
<p>ë³´ë‚´ê³  ìˆëŠ” ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë””ë²„ê·¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ì•±ì„ ìŠ¤í…Œì´ì§• í™˜ê²½(production mode)ì— ë°°í¬í•˜ê±°ë‚˜ ì„ì‹œë¡œ Strict Modeë¥¼ ì œê±°í•˜ê³ , ê°œë°œ í™˜ê²½ì—ì„œ remounting checkë¥¼ í•  ìˆ˜ ìˆë‹¤. Effect ëŒ€ì‹  route change ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¶„ì„ì„ ë³´ë‚¼ ìˆ˜ë„ ìˆë‹¤. ì¢€ ë” ì •ë°€í•œ ë¶„ì„ì„ ìœ„í•´ì„œëŠ” <code>intersection observers</code> ê°€ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ viewportì— ìˆê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ ë³´ì´ëŠ”ì§€ ë„ì™€ì¤„ ìˆ˜ ìˆë‹¤.</p>
<h2>Effectê°€ ì•„ë‹Œ ê²ƒ: ì•± init</h2>
<p>ì–´ë–¤ ë¡œì§ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•´ì•¼ í•œë‹¤. ì´ëŸ° ê±´ ì»´í¬ë„ŒíŠ¸ ë°–ì— ë‘˜ ìˆ˜ ìˆë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token dom variable">window</span> <span class="token operator">!==</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// Check if we're running in the browser.</span>
</span><span class="code-line">  <span class="token function">checkAuthToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">loadDataFromLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ì´ê²ƒì€ í˜ì´ì§€ê°€ ë¸Œë¼ìš°ì €ì— ë¡œë“œë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•  ê²ƒì„ ë³´ì¥í•œë‹¤.</p>
<h2>Effectê°€ ì•„ë‹Œ ê²ƒ: ì œí’ˆ êµ¬ë§¤</h2>
<p>ë•Œë•Œë¡œ cleanup functionì„ ì‘ì„±í•˜ë”ë¼ë„ Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ user-visibleí•œ ë™ì‘ì„ ë§‰ì„ ë°©ë²•ì´ ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Effectê°€ ì œí’ˆ êµ¬ë§¤ ê°™ì€ POST ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.</span>
</span><span class="code-line">  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/api/buy"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">"POST"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>ì œí’ˆì´ ë‘ë²ˆ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ ì™œ Effectì— ì´ ë¡œì§ì„ ë„£ì–´ì•¼ë§Œ í–ˆì„ê¹Œ? ë§Œì•½ ìœ ì €ê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ê°”ë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì˜¨ë‹¤ë©´? EffectëŠ” ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤. ìœ ì €ê°€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í–ˆì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ë°”ë¼ì§€ ì•Šì„ ê²ƒì´ë‹¤. êµ¬ë§¤ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›í•  ê²ƒì´ë‹¤.</p>
<p>êµ¬ë§¤ëŠ” ë Œë”ë¡œ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤; íŠ¹ì • ì¸í„°ë™ì…˜ì´ ì˜í•´ ë°œìƒí•œë‹¤. ë‹¨ì§€ ì¸í„°ë™ì…˜ì´ í•œë²ˆ ë°œìƒí–ˆì„ ë•Œ í•œë²ˆ ì‹¤í–‰ë  ë¿ì´ë‹¤. Effectë¥¼ ì§€ìš°ê³  api ìš”ì²­ì€ êµ¬ë§¤ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì˜®ê¸°ì.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// âœ… Buying is an event because it is caused by a particular interaction.</span>
</span><span class="code-line">  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"/api/buy"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">"POST"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ë§Œì•½ remountê°€ ì•±ì˜ ë¡œì§ì„ íŒŒê´´í•œë‹¤ë©´ ì´ê²ƒì€ ë“œëŸ¬ë‚˜ì§€ ì•Šì€ ì¡´ì¬í•˜ëŠ” ë²„ê·¸ì„ì„ ë³´ì—¬ì¤€ë‹¤. ìœ ì €ì˜ ì‹œì„ ì—ì„œ, í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ëŠ” ê²ƒì€ ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜ ë§í¬ë¥¼ ëˆ„ë¥´ëŠ” ê²ƒê³¼ ë‹¤ë¥´ë©´ ì•ˆëœë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ê°œë°œ í™˜ê²½ì—ì„œ í•œë²ˆ remount í•¨ìœ¼ë¡œì¨ ì´ ì›ì¹™ì„ íŒŒê´´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì…ì¦í•œë‹¤.</p>
<h2>í•œë²ˆì— ë•Œë ¤ë„£ê¸°</h2>
<p>ì´ í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” ì˜ˆì œì—ì„œ Effectê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ â€œëŠë‚Œì„ ê°–ë„ë¡" ë„ì™€ì¤€ë‹¤.</p>
<p>ì´ ì˜ˆì œëŠ” Effectê°€ ì‹¤í–‰ë˜ê³  3ì´ˆ í›„ input textê°€ console.logì™€ í•¨ê»˜ ë‚˜íƒ€ë‚˜ê²Œ í•˜ë„ë¡ setTimeoutì„ ì‚¬ìš©í•œë‹¤. ì´ cleanup functionì€ ëŒ€ê¸°ì¤‘ì¸ timeoutì„ ì·¨ì†Œí•œë‹¤. â€œMount the componentâ€ë¥¼ ëˆŒëŸ¬ì„œ ì‹œì‘í•´ë³´ì.</p>
<p><a href="https://codesandbox.io/s/8jsz1t?file=%2FApp.js&#x26;from-sandpack=true" target="_blank" rel="noopener noreferrer">playground example</a></p>
<blockquote>
<p>ëŒ€ì¶© Schedule, Cancel ë˜ëŠ” ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆê³  ì—¬ëŸ¬ ë²ˆ ì…ë ¥í•´ë„ clearTimeout ë•Œë¬¸ì— textê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì…ë ¥í•œ ì‹œì ìœ¼ë¡œë¶€í„° 3ì´ˆ í›„ì— ë‹¨ í•˜ë‚˜ë§Œ ë³´ì—¬ì§ˆ ê²ƒì´ë¼ëŠ” ì„¤ëª…</p>
</blockquote>
<h2>Recap</h2>
<ul>
<li>Unlike events, Effects are caused by rendering itself rather than a particular interaction.</li>
<li>Effects let you synchronize a component with some external system (third-party API, network, etc).</li>
<li>By default, Effects run after every render (including the initial one).</li>
<li>React will skip the Effect if all of its dependencies have the same values as during the last render.</li>
<li>You canâ€™t â€œchooseâ€ your dependencies. They are determined by the code inside the Effect.</li>
<li>An empty dependency array (<code>[]</code>) corresponds to the component â€œmountingâ€, i.e. being added to the screen.</li>
<li>When Strict Mode is on, React mounts components twice (in development only!) to stress-test your Effects.</li>
<li>If your Effect breaks because of remounting, you need to implement a cleanup function.</li>
<li>React will call your cleanup function before the Effect runs next time, and during the unmount.</li>
</ul></div></div></article></main><style data-emotion="css azvjko">.css-azvjko{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:30px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;white-space:pre;}</style><footer class="css-azvjko"><span>Copyright <!-- -->2022<!-- -->. </span><style data-emotion="css 1ovucv3">.css-1ovucv3{-webkit-text-decoration:none;text-decoration:none;color:inherit;color:#6667AB;}</style><a href="https://github.com/solidw" target="_blank" rel="noopener noreferrer" class="css-1ovucv3"><span>@solidw</span></a><span> All rights reserved.</span></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"attributes":{"title":"Synchronizing with Effects ë²ˆì—­","description":"React 18ì—ì„œëŠ” ê°œë°œ í™˜ê²½ì—ì„œ useEffectë¥¼ ì¼ë¶€ëŸ¬ 2ë²ˆ í˜¸ì¶œí•œë‹¤ëŠ”ë°,, ëŒ€ì²´ ì™œ?","draft":false,"date":"2022-06-25","to":"Reactì˜ useEffectì˜ ì² í•™ì´ ê¶ê¸ˆí•œ ì‚¬ëŒ"},"body":"\u003e ì›ë¬¸: [https://beta.reactjs.org/learn/synchronizing-with-effects](https://beta.reactjs.org/learn/synchronizing-with-effects)\n\nì–´ë–¤ ì»´í¬ë„ŒíŠ¸ëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë¦¬ì•¡íŠ¸ ìƒíƒœë¥¼ í†µí•´ non-ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì»¨íŠ¸ë¡¤ í•˜ê³  ì‹¶ë‹¤ë˜ê°€, ì„œë²„ì™€ ì»¤ë„¥ì…˜ì„ ì—°ë‹¤ë˜ê°€, ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ ë¶„ì„ ë¡œê·¸ë¥¼ ë³´ë‚´ëŠ” ê²ƒë“¤ì´ ìˆë‹¤. `Effects` ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ì•¡íŠ¸ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œë“¤ê³¼ ë™ê¸°í™” í•˜ê¸° ìœ„í•´ ë Œë” ì´í›„ì— ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.\n\n```markdown\nYou will learn\n\n- Effectsê°€ ë¬´ì—‡ì¸ì§€\n- Effectsì™€ eventsê°€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€\n- ì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì–´ë–»ê²Œ ì„ ì–¸í•  ê²ƒì¸ì§€\n- ì–´ë–»ê²Œ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ re-runí•˜ì§€ ì•Šë„ë¡ skip í•  ìˆ˜ ìˆëŠ”ì§€\n- ì™œ EffectsëŠ” ê°œë°œ í™˜ê²½ì—ì„œ 2ë²ˆ ì‹¤í–‰ë˜ê³  ì–´ë–»ê²Œ ê³ ì¹˜ëŠ”ì§€\n```\n\n## Effectsì™€ eventsëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ê°€?\n\nEffectsë¥¼ ì•Œê¸° ì „ì—, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ 2ê°€ì§€ ë¡œì§ê³¼ ì¹œí•´ì ¸ì•¼ í•œë‹¤.\n\n- Rendering Code(introduced in [Describing the UI](https://beta.reactjs.org/learn/describing-the-ui))ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ ë ˆë²¨ì— ìˆë‹¤. ì´ê²ƒì€ propsì™€ stateë¥¼ ë‹¤ë£¨ê³  ê·¸ê²ƒë“¤ì„ ë³€í™˜í•˜ë©°, JSXë¥¼ í™”ë©´ì— ì›í•˜ëŠ” ê³³ì— ë¦¬í„´í•˜ëŠ” ê³³ì´ë‹¤. [Rendering code must be pure](https://beta.reactjs.org/learn/keeping-components-pure). ìˆ˜í•™ ê³µì‹ì²˜ëŸ¼ ê·¸ê²ƒì€ ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒ ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤.\n- **Event handlers**(introduced in [Adding Interactivity](https://beta.reactjs.org/learn/adding-interactivity)) ëŠ” ë‹¨ìˆœ ê³„ì‚°í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ë¬´ì–¸ê°€ë¥¼ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ì¤‘ì²©ëœ í•¨ìˆ˜ë‹¤. `event handler`ëŠ” input fieldë¥¼ update í•˜ê±°ë‚˜, ì œí’ˆì„ êµ¬ë§¤í•˜ê¸° ìœ„í•´ HTTP POST ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜, ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ìœ ì €ê°€ ì´ë™í•˜ê²Œ í•  ê²ƒì´ë‹¤. `event handler` ëŠ” [â€œside effectsâ€](\u003chttps://en.wikipedia.org/wiki/Side_effect_(computer_science)\u003e) (ì´ê²ƒì€ í”„ë¡œê·¸ë¨ì˜ ìƒíƒœë¥¼ ë°”ê¾¼ë‹¤)ë¥¼ í¬í•¨í•˜ê³  ìœ ì €ì˜ íŠ¹ë³„í•œ ì•¡ì…˜ìœ¼ë¡œ ë°œìƒí•œë‹¤.(ì˜ˆë¥¼ ë“¤ë©´ ë²„íŠ¼ í´ë¦­ì´ë‚˜ íƒ€ì´í•‘)\n\në•Œë•Œë¡œ ê·¸ê²ƒì€ ì¶©ë¶„í•˜ì§€ ì•Šë‹¤. `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ë©´, ì»´í¬ë„ŒíŠ¸ëŠ” í™”ë©´ì— ë³´ì´ì§€ ì•Šì•„ë„ chat serverì™€ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. ì„œë²„ì™€ ì—°ê²°í•˜ëŠ” ê²ƒì€ `pure calculation` ì´ ì•„ë‹ˆë¯€ë¡œ(side effectì„) ê·¸ê²ƒì€ ë Œë”ë§ ë„ì¤‘ì— ì¼ì–´ë‚  ìˆ˜ ì—†ë‹¤. í•˜ì§€ë§Œ `ChatRoom` ì„ ë³´ì´ê²Œ í•˜ëŠ” í´ë¦­ê³¼ ê°™ì€ íŠ¹ì • ì´ë²¤íŠ¸ëŠ” ì—†ë‹¤.\n\n**Effectsë¥¼ ì‚¬ìš©í•˜ë©´ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ ë Œë”ë§ ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” side effectsë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.** ì±„íŒ…ì°½ì—ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒì€ ìœ ì €ê°€ ë²„íŠ¼ì„ í´ë¦­í•¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ë‹¤. í•˜ì§€ë§Œ ì„œë²„ ì»¤ë„¥ì…˜ì„ ì„¸íŒ…í•˜ëŠ” ê²ƒì€ ì–´ë–¤ ì¸í„°ë™ì…˜ê³¼ ìƒê´€ì—†ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¨ìœ¼ë¡œì¨ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— `Effect` ì´ë‹¤. EffectëŠ” í™”ë©´ì˜ ì—…ë°ì´íŠ¸ì˜ ë§ˆì§€ë§‰ [rendering process](https://beta.reactjs.org/learn/render-and-commit) ì— ì‹¤í–‰ëœë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ë„¤íŠ¸ì›Œí¬ë‚˜ ì„œë“œíŒŒí‹°)ì™€ ë™ê¸°í™”í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°ì´ë‹¤.\n\n\u003e ğŸ’¡ NOTE\n\u003e\n\u003e ì´ ì•„ë˜ì—ì„œ ë¶€í„°ëŠ” capitalized â€œEffectâ€ëŠ” ìœ„ì—ì„œ Reactì™€ ê´€ë ¨ìˆëŠ” Effectë¥¼ ë§í•œë‹¤. ë‹¤ì‹œ ë§í•´ì„œ ë Œë”ë§ìœ¼ë¡œ ì¸í•œ side effectë¥¼ ë§í•œë‹¤. í­ë„“ì€ í”„ë¡œê·¸ë˜ë° ê°œë…ìœ¼ë¡œëŠ” ìš°ë¦¬ëŠ” â€œside effectâ€ë¼ê³  ë¶€ë¥¼ ê²ƒì´ë‹¤.\n\n## ë„ˆëŠ” ì•„ë§ˆë„ Effectê°€ í•„ìš”ì—†ë‹¤.\n\nì»´í¬ë„ŒíŠ¸ì— Effectsë¥¼ ë¬´ì‘ì • ì¶”ê°€í•˜ì§€ ë§ˆë¼. EffectsëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ â€œì ê¹â€ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë¸Œë¼ìš°ì € APIë‚˜ ì„œë“œíŒŒí‹° ìœ„ì ¯, ë„¤íŠ¸ì›Œí¬ ë“±ì´ ì—¬ê¸°ì— í•´ë‹¹í•œë‹¤. ë§Œì•½ ë„ˆì˜ effectê°€ ì–´ë–¤ ìƒíƒœì— ê¸°ë°˜í•œ ìƒíƒœë§Œì„ ì¡°ì •í•œë‹¤ë©´, [you might not need an Effect.](https://beta.reactjs.org/learn/you-might-not-need-an-effect)\n\n## Effectë¥¼ ì“°ëŠ” ë°©ë²•\n\nEffectë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ ì„¸ ìŠ¤í…ì„ ë”°ë¼ë¼.\n\n1. **Effectë¥¼ ì •ì˜í•´ë¼**. ê¸°ë³¸ì ìœ¼ë¡œ ë„ˆì˜ EffectëŠ” ë§¤ ë Œë”ë§ˆë‹¤ ì‹¤í–‰ë  ê²ƒì´ë‹¤.\n2. **Effectì˜ dependenciesë¥¼ ëª…ì‹œí•´ë¼.** ëŒ€ë¶€ë¶„ì˜ EffectsëŠ” ë§¤ë²ˆ ë Œë”ë˜ê¸° ë³´ë‹¤ëŠ” í•„ìš”í•  ë•Œë§Œ re-render ë˜ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œë§Œ ë™ì‘í•´ì•¼ í•œë‹¤. ì±„íŒ…ë°©ì„ ì—°ê²°í•˜ê³  í•´ì œí•˜ëŠ” ì¼ì€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ˆ ë•Œë‚˜ ì±„íŒ…ë°©ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ ì¼ì–´ë‚˜ì•¼ í•œë‹¤. dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ ì´ê²ƒì„ ì–´ë–»ê²Œ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ê²ƒì¸ì§€ ë°°ìš¸ ê²ƒì´ë‹¤.\n3. í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•´ë¼. ì–´ë–¤ EffectsëŠ” ê·¸ê²ƒì´ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦¬ê±°ë‚˜ clean up í•˜ëŠ” ë²•ì„ í•  ì§€ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `connect` ëŠ” `disconnect`, `subscribe` ëŠ” `unsubscribe` ê·¸ë¦¬ê³  `fetch` ëŠ” `cancel` ì´ë‚˜ `ignore` ê°€ í•„ìš”í•˜ë‹¤. cleanup functionì„ ë¦¬í„´í•¨ìœ¼ë¡œì¨ ì´ë ‡ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ê²ƒì´ë‹¤.\n\nìì„¸íˆ ì•Œì•„ë³´ì.\n\n## Step 1: Effectë¥¼ ì •ì˜í•´ë¼\n\nì»´í¬ë„ŒíŠ¸ì— Effectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” useEffect Hookì„ import í•˜ì:\n\n```tsx\nimport { useEffect } from \"react\";\n```\n\nê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ì˜ íƒ‘ë ˆë²¨ì—ì„œ ì´ ì½”ë“œê°€ ì¶”ê°€ëœ ì´í™íŠ¸ë¥¼ í˜¸ì¶œí•˜ì:\n\n```tsx\nfunction MyComponent() {\n  useEffect(() =\u003e {\n    // Code here will run after *every* render\n  });\n  return \u003cdiv /\u003e;\n}\n```\n\nì»´í¬ë„ŒíŠ¸ê°€ ë Œë”í•  ë•Œ ë§ˆë‹¤ ReactëŠ” ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ê³  useEffect ë‚´ë¶€ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë‹¤ì‹œ ë§í•´ì„œ useEffectëŠ” í™”ë©´ì—ì„œ ë Œë”ë§ì´ ë°˜ì˜ë  ë•Œ ê¹Œì§€ ì½”ë“œ ì¡°ê°ë“¤ì„ ì§€ì—°í•œë‹¤.\n\nEffectë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ ì–´ë–»ê²Œ í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ì. `\u003cVideoPlayer\u003e` ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ì— `isPlaying` propì„ ë„˜ê²¨ì„œ ì¬ìƒí•˜ê±°ë‚˜ ë©ˆì¶”ê²Œ ì»¨íŠ¸ë¡¤í•œë‹¤ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.\n\n```tsx\n\u003cVideoPlayer isPlaying={isPlaying} /\u003e\n```\n\nVideoPlayer ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì € `\u003cvideo\u003e` íƒœê·¸ë¥¼ ë Œë”í•œë‹¤:\n\n```tsx\nfunction VideoPlayer({ src, isPlaying }) {\n  // TODO: do something with isPlaying\n  return \u003cvideo src={src} /\u003e;\n}\n```\n\ní•˜ì§€ë§Œ ë¸Œë¼ìš°ì €ì˜ `\u003cvideo\u003e` tagëŠ” `isPlaying` propì´ ì—†ë‹¤. ìœ ì¼í•˜ê²Œ ì»¨íŠ¸ë¡¤í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ìˆ˜ë™ìœ¼ë¡œ DOM elementì˜ play()ì™€ pause() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ë™ì˜ìƒì„ ì¬ìƒí•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” isPlaying propê³¼ play, pause ê°™ì€ í•„ìˆ˜ í˜¸ì¶œê³¼ ë™ê¸°í™” í•´ì•¼í•œë‹¤.\n\nìš°ë¦¬ëŠ” `\u003cvideo\u003e` DOM nodeì˜ refë¥¼ ì–»ì–´ì•¼ í•œë‹¤.\n\nplayë‚˜ pauseë¥¼ ë Œë”ë§ ì¤‘ì— í˜¸ì¶œí•˜ê³  ì‹¶ì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ê·¸ê²ƒì€ ì˜ëª»ëë‹¤.\n\nì´ ì½”ë“œê°€ í‹€ë¦° ì´ìœ ëŠ” DOM nodeê°€ ë Œë”ë§ ì¤‘ì— ë­”ê°€ë¥¼ í•˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œëŠ” JSXì˜ ë Œë”ë§ì€ ìˆœìˆ˜ í•¨ìˆ˜ì´ì–´ì•¼ í•˜ë©° DOMì„ ìˆ˜ì •í•˜ëŠ” ê²ƒ ê°™ì€ side effectsë¥¼ í¬í•¨í•˜ë©´ ì•ˆëœë‹¤.\n\nê²Œë‹¤ê°€ VideoPlayerê°€ ì²˜ìŒ í˜¸ì¶œë  ë•Œ ê·¸ê²ƒì˜ DOMì€ ì•„ì§ ì—†ë‹¤! playë‚˜ pauseë¥¼ í˜¸ì¶œí•  DOM nodeê°€ ì•„ì§ ì—†ë‹¤. ì™œë‚˜í•˜ë©´ ë¦¬ì•¡íŠ¸ëŠ” JSXê°€ ë¦¬í„´í•˜ê¸° ì „ ê¹Œì§€ ìƒì„±ë  DOMì— ëŒ€í•´ì„œ ëª¨ë¥¸ë‹¤.\n\në°©ë²•ì€ ë Œë”ë§ ê³„ì‚°ì—ì„œ side effectë¥¼ ë°–ìœ¼ë¡œ êº¼ë‚´ê¸° ìœ„í•´ useEffectë¡œ ë˜í•‘í•˜ëŠ” ê²ƒì´ë‹¤.\n\n```tsx\nimport { useEffect, useRef } from \"react\";\n\nfunction VideoPlayer({ src, isPlaying }) {\n  const ref = useRef(null);\n\n  useEffect(() =\u003e {\n    if (isPlaying) {\n      ref.current.play();\n    } else {\n      ref.current.pause();\n    }\n  });\n\n  return \u003cvideo ref={ref} src={src} loop playsInline /\u003e;\n}\n```\n\nEffect ì•ˆì—ì„œ DOM updateë¥¼ ë˜í•‘í•¨ìœ¼ë¡œì¨ ë¦¬ì•¡íŠ¸ê°€ í™”ë©´ì„ ë¨¼ì € ì—…ë°ì´íŠ¸ í•˜ê²Œ í–ˆë‹¤. ê·¸ë¦¬ê³  Effectê°€ ì‹¤í–‰ëœë‹¤.\n\n`VideoPlayer` ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë  ë•Œ(ì²« renderë‚˜ re-renderë“ ) ëª‡ê°€ì§€ ì¼ì´ ì¼ì–´ë‚œë‹¤. ë¨¼ì € ë¦¬ì•¡íŠ¸ê°€ ìŠ¤í¬ë¦°ì„ ì—…ë°ì´íŠ¸í•˜ë©° ì˜¬ë°”ë¥¸ propìœ¼ë¡œ DOMì— `\u003cvideo\u003e` íƒœê·¸ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. ê·¸ë¦¬ê³  ë¦¬ì•¡íŠ¸ëŠ” Effectë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ EffectëŠ” playë‚˜ pauseë¥¼ isPlaying propì— ë”°ë¼ í˜¸ì¶œí•  ê²ƒì´ë‹¤.\n\nPlay/Puaseë¥¼ ì—¬ëŸ¬ ë²ˆ ëˆ„ë¥´ê³  video playerê°€ isPlaying ê°’ê³¼ ì–´ë–»ê²Œ ë™ê¸°í™”ë˜ëŠ”ì§€ ë³´ì.\n\nì˜ˆì œì—ì„œ ë¦¬ì•¡íŠ¸ ìƒíƒœì™€ ë™ê¸°í™”ëœ â€œì™¸ë¶€ ì‹œìŠ¤í…œâ€ì€ ë¸Œë¼ìš°ì € media API ì˜€ë‹¤. ë¹„ìŠ·í•œ ì ‘ê·¼ë²•ì„ ì„ ì–¸ì  ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— legacy non-ë¦¬ì•¡íŠ¸ ì½”ë“œ(jQuery plugin ê°™ì€)ë¥¼ ë˜í•‘í•˜ì—¬ ì ìš©í•  ìˆ˜ ìˆë‹¤.\n\në¹„ë””ì˜¤ í”Œë ˆì´ì–´ë¥¼ ì»¨íŠ¸ë¡¤í•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œ ë” ë³µì¡í•˜ë‹¤. playë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ ë‚´ì¥ ë¸Œë¼ìš°ì € ì»¨íŠ¸ë¡¤ë¡œ play í˜¹ì€ pause í•  ìˆ˜ ìˆë‹¤. ì´ ì˜ˆì œëŠ” ë§¤ìš° ë‹¨ìˆœí•˜ê³  ë¶ˆì™„ì „í•˜ë‹¤.\n\n\u003e ğŸ’¡ Pitfall\n\u003e ê¸°ë³¸ì ìœ¼ë¡œ EffectsëŠ” ë§¤ ë Œë” í›„ì— ì‹¤í–‰ëœë‹¤. ì´ ë§ì€ ì™œ ì•„ë˜ì˜ ì½”ë“œê°€ ë¬´í•œë£¨í”„ë¥¼ ë°œìƒí•˜ëŠ” ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.\n\u003e\n\u003e ```tsx\n\u003e const [count, setCount] = useState(0);\n\u003e useEffect(() =\u003e {\n\u003e   setCount(count + 1);\n\u003e });\n\u003e ```\n\u003e\n\u003e EffectsëŠ” ë Œë”ë§ì˜ ê²°ê³¼ë¡œ ì‹¤í–‰í•œë‹¤. ìƒíƒœë¥¼ setí•˜ëŠ” ê²ƒì€ ë Œë”ë§ì„ ë°œìƒì‹œí‚¨ë‹¤. Effect ì•ˆì˜ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ setí•˜ëŠ” ê²ƒì€ ì „ì› ë‹¨ìë¥¼ ìŠ¤ìŠ¤ë¡œ í”ŒëŸ¬ê·¸ë¥¼ ê½ƒëŠ” ê²ƒê³¼ ê°™ë‹¤. Effectê°€ ì‹¤í–‰ë˜ë©´, ìƒíƒœë¥¼ setí•˜ê³  ì´ê²ƒì€ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ì´ê²ƒì€ Effectë¥¼ ì‹¤í–‰í•˜ê³ , ìƒíƒœë¥¼ ë‹¤ì‹œ setí•˜ê³  ë˜ ë‹¤ë¥¸ ë¦¬ë Œë”ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.\n\u003e EffectsëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì™¸ë¶€ì˜ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë§Œì•½ ì™¸ë¶€ ì‹œìŠ¤í…œì´ ì—†ê³  ë‹¨ìˆœíˆ ìƒíƒœë¥¼ ì¡°ì •í•˜ê¸° ìœ„í•´ Effectë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Effectê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²ƒì´ë‹¤.\n\n## Step 2: Effectì˜ dependenciesë¥¼ ëª…ì‹œí•˜ì\n\nê¸°ë³¸ì ìœ¼ë¡œ EffectëŠ” ë§¤ ë Œë” ì´í›„ì— ì‹¤í–‰ëœë‹¤. ì¢…ì¢… ê·¸ê²ƒì€ ì›ì¹˜ ì•Šë˜ ê²ƒì´ë‹¤.\n\n- ê°€ë”, ëŠë¦¬ë‹¤. ì™¸ë¶€ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ í•­ìƒ ì¦‰ì‹œì¸ ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í•„ìš”í•  ë•Œ ê¹Œì§€ ìŠ¤í‚µí•˜ê¸¸ ì›í•  ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë§¤ íƒ€ì´í•‘ë§ˆë‹¤ ì±— ì„œë²„ì™€ ì¬ì—°ê²° í•˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤.\n- ê°€ë” í‹€ë¦°ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ fade-in ì• ë‹ˆë©”ì´ì…˜ì„ ëª¨ë“  íƒ€ì´í•‘ì— ë™ì‘í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì• ë‹ˆë©”ì´ì…˜ì€ ìµœì´ˆì— ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œ í•œë²ˆë§Œ ë™ì‘í•´ì•¼ í•œë‹¤.\n\nì´ í˜„ìƒì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì•„ê¹Œì˜ ì˜ˆì œë¥¼ ëª‡ê°œì˜ console.log í˜¸ì¶œê³¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” text input ì´ ìˆë‹¤. íƒ€ì´í•‘í•  ë•Œ Effectê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì.\n\n[playground example](https://codesandbox.io/s/8jyd5t?file=%2FApp.js\u0026from-sandpack=true)\n\nuseEffect í˜¸ì¶œì˜ ë‘ë²ˆì§¸ ì¸ìë¡œ dependenciesë¥¼ ëª…ì‹œí•¨ìœ¼ë¡œì¨ Effectê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì¬ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤. ë¹ˆ `[]` ë°°ì—´ì„ ì¶”ê°€í•´ë³´ì.\n\n```tsx\nuseEffect(() =\u003e {\n  // ...\n}, []);\n```\n\n`React Hook useEffect has a missing dependency: 'isPlaying'` ë¼ëŠ” ì—ëŸ¬ë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\në¬¸ì œëŠ” isPlaying propì— ì˜ì¡´í•˜ëŠ” effect ë‚´ë¶€ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•  ì§€ ì •í•˜ì§€ë§Œ ì´ dependencyëŠ” ì™¸ë¶€ì— ì •ì˜ë˜ì§€ ì•Šì•˜ë‹¤. ì´ê±¸ ê³ ì¹˜ê¸° ìœ„í•´ì„œëŠ” `isPlaying`ì„ dependency arrayì— ì¶”ê°€í•˜ì.\n\n```tsx\nuseEffect(() =\u003e {\n  if (isPlaying) {\n    // It's used here...\n    // ...\n  } else {\n    // ...\n  }\n}, [isPlaying]); // ...so it must be declared here!\n```\n\nì´ì œ ëª¨ë“  ì˜ì¡´ì„±ë“¤ì´ ì •ì˜ë˜ì–´ì„œ ì—ëŸ¬ê°€ ì—†ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì— `[isPlaying]` ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ `isPlaying` ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ ì¬ì‹¤í–‰ ë˜ëŠ” ê²ƒì„ skip í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ ë³€í™”ë¡œ inputì— íƒ€ì´í•‘í•˜ëŠ” ê²ƒì€ effectê°€ ì¬ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Play/Pauseë¥¼ í´ë¦­í•˜ëŠ” ê²ƒì€ ì¬ì‹¤í–‰ëœë‹¤.\n\nì˜ì¡´ì„± ë°°ì—´ì€ ì—¬ëŸ¬ê°œì˜ ì˜ì¡´ì„±ë“¤ì„ ê°–ì„ ìˆ˜ ìˆë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ëª…ì‹œëœ ëª¨ë“  ì˜ì¡´ì„±ì´ ì´ì „ ë Œë”ì™€ ê°™ì€ ê°’ì´ë¼ë©´ Effectë¥¼ ì¬ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì˜ì¡´ì„± ê°’ì„ `[Object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)` ë¡œ ë¹„êµí•œë‹¤. useEffect API referenceì—ì„œ ë” ìì„¸íˆ ë³¼ ìˆ˜ ìˆìŒ\n\nì˜ì¡´ì„±ì„ â€œì„ íƒ\"í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ë§Œì•½ ëª…ì‹œí•œ ì˜ì¡´ì„±ì´ ë¦¬ì•¡íŠ¸ê°€ ì˜ˆìƒí•œ Effect ë‚´ë¶€ì˜ ì½”ë“œì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ Lint errorë¥¼ ë³´ê²Œ ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ ì½”ë“œì—ì„œ ë§ì€ ë²„ê·¸ë¥¼ ì¡ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤. ë§Œì•½ Effectê°€ ëª‡ëª‡ ê°’ì„ ì´ìš©í•˜ì§€ë§Œ ê·¸ê²ƒì´ ë³€í•  ë•Œ ë§ˆë‹¤ ì¬ì‹¤í–‰ë˜ì§€ ì•Šê¸¸ ë°”ë€ë‹¤ë©´ Effect code ìŠ¤ìŠ¤ë¡œê°€ ê·¸ ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.\n\n\u003e ğŸ’¡ Pitfall\n\u003e ì˜ì¡´ì„± ë°°ì—´ì´ ìˆëŠ” ê²½ìš°ì™€ ì—†ëŠ” ê²½ìš° ë™ì‘ì€ ë§¤ìš° ë‹¤ë¥´ë‹¤.\n\u003e\n\u003e ```tsx\n\u003e useEffect(() =\u003e {\n\u003e   // This runs after every render\n\u003e });\n\u003e\n\u003e useEffect(() =\u003e {\n\u003e   // This runs only on mount (when the component appears)\n\u003e }, []);\n\u003e\n\u003e useEffect(() =\u003e {\n\u003e   // This runs on mount *and also* if either a or b have changed since the last render\n\u003e }, [a, b]);\n\u003e ```\n\u003e\n\u003e ë‹¤ìŒ ìŠ¤í…ì—ì„œ mountë¥¼ ìì„¸íˆ ì‚´í´ë³´ì\n\n## Step 3: í•„ìš”í•˜ë‹¤ë©´ cleanupì„ ì¶”ê°€í•˜ì\n\në‹¤ë¥¸ ì˜ˆì œë¥¼ ìƒê°í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë‚˜íƒ€ë‚  ë•Œ chat serverì™€ ì—°ê²°í•  í•„ìš”ê°€ ìˆëŠ” `ChatRoom` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆë‹¤. connectì™€ disconnectë¼ëŠ” ë©”ì†Œë“œë¥¼ í¬í•¨í•œ objectë¥¼ ë¦¬í„´í•˜ëŠ” `createConnection` ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ìœ ì €ì—ê²Œ ë³´ì—¬ì§ˆ ë•Œë§Œ ì—°ê²°ì„ ìœ ì§€í•  ìˆ˜ ìˆì„ê¹Œ?\n\nEffect ì‘ì„± ë¶€í„° ì‹œì‘:\n\n```tsx\nuseEffect(() =\u003e {\n  const connection = createConnection();\n  connection.connect();\n});\n```\n\në§¤ë²ˆ ë Œë”í•  ë•Œ ë§ˆë‹¤ ì—°ê²°í•˜ëŠ” ê²ƒì€ ëŠë¦´í…Œë‹ˆê¹Œ, ì˜ì¡´ì„± ë°°ì—´ì„ ì¶”ê°€í•˜ì.\n\n```tsx\nuseEffect(() =\u003e {\n  const connection = createConnection();\n  connection.connect();\n}, []);\n```\n\nEffect ë‚´ë¶€ì˜ ì½”ë“œëŠ” ì–´ë–¤ propsë‚˜ stateë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì˜ì¡´ì„± ë°°ì—´ì€ `[]` ë‹¤. ì´ê²ƒì€ ë¦¬ì•¡íŠ¸ê°€ ì˜¤ì§ ì»´í¬ë„ŒíŠ¸ê°€ mount ë˜ì—ˆì„ ë•Œ Effectë¥¼ ì‹¤í–‰í•  ê²ƒì„ ë§í•œë‹¤. (í™”ë©´ì— ì²˜ìŒ ë‚˜íƒ€ë‚¬ì„ ë•Œ)\n\nì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì\n\n[playground example](https://codesandbox.io/s/ivqrgu?file=%2FApp.js\u0026from-sandpack=true)\n\nì´ EffectëŠ” ì˜¤ì§ mount ëì„ ë•Œë§Œ ì‹¤í–‰í•˜ë¯€ë¡œ â€œConnectingâ€¦â€ ì„ í•œë²ˆ ì¶œë ¥í•  ê²ƒì„ ì˜ˆìƒí–ˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ consoleì„ í™•ì¸í•´ë³´ë©´ 2ë²ˆ ì¶œë ¥ëœë‹¤. ì™œ ê·¸ëŸ´ê¹Œ?\n\n`ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ì—¬ëŸ¬ ê°œì˜ ë‹¤ë¥¸ í™”ë©´ì´ ìˆëŠ” í° ì•±ì˜ ì¼ë¶€ë¶„ì´ë¼ê³  ìƒê°í•´ë³´ì. ìœ ì €ëŠ” `ChatRoom` í˜ì´ì§€ì—ì„œ ê·¸ë“¤ì˜ ì—¬ì •ì„ ì‹œì‘í•œë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ëŠ” mount ë˜ê³  `connection.connect` ë¥¼ í˜¸ì¶œí•œë‹¤. ê·¸ë¦¬ê³  ìœ ì €ê°€ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•œë‹¤ê³  ìƒê°í•´ë³´ìâ€”ì˜ˆë¥¼ ë“¤ì–´ í™˜ê²½ ì„¤ì • í˜ì´ì§€. ì´ `ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ëœë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ ì €ëŠ” ë’¤ë¡œê°€ê¸°ë¥¼ í´ë¦­í•˜ê³  `ChatRoom` ì´ ë‹¤ì‹œ mount ëœë‹¤. ì´ê²ƒì€ ë‘ ë²ˆì§¸ connectionì„ ì—°ê²°í•œë‹¤â€”í•˜ì§€ë§Œ ì²« ë²ˆì§¸ ì»¤ë„¥ì€ ì•„ì§ ì‚¬ë¼ì§€ì§€ ì•Šì•˜ë‹¤! ìœ ì €ê°€ ì•±ì„ ë„˜ë‚˜ë“¤ë©´ connectionì€ ê³„ì† ìŒ“ì¼ ê²ƒì´ë‹¤.\n\nì¼ì¼ì´ ê´‘ë²”ìœ„í•œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ì§€ ì•Šê³ ì„œëŠ” ì´ëŸ° ë²„ê·¸ë“¤ì€ ë†“ì¹˜ê¸° ì‰½ë‹¤. ì´ëŸ° ê²ƒì„ ë¹¨ë¦¬ ì•Œê¸° ìœ„í•´ ë¦¬ì•¡íŠ¸ ê°œë°œ ëª¨ë“œì—ì„œëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì²« mount í›„ ë‹¤ì‹œ í•œë²ˆ mount í•œë‹¤. â€œConnectingâ€¦â€ ì´ 2ë²ˆ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì€ ì§„ì§œ ì´ìŠˆ:ì½”ë“œê°€ ì»´í¬ë„ŒíŠ¸ê°€ unmount ëì„ ë•Œ connectionì„ closeí•˜ì§€ ì•Šì•˜ìŒì„ ë¹¨ë¦¬ ì•Œ ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.\n\nì´ ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Effectì— cleanup functionì„ returní•˜ì:\n\n```tsx\nuseEffect(() =\u003e {\n  const connection = createConnection();\n  connection.connect();\n  return () =\u003e {\n    connection.disconnect();\n  };\n}, []);\n```\n\në¦¬ì•¡íŠ¸ëŠ” cleanup functionì„ Effectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê¸° ì „ì— í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ê°€ unmount(ì‚­ì œë  ë•Œ) ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ í˜¸ì¶œí•  ê²ƒì´ë‹¤. cleanup functionì´ êµ¬í˜„ë˜ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.\n\n[playground example](https://codesandbox.io/s/oil0if?file=%2FApp.js\u0026from-sandpack=true)\n\ndevelopmodeì—ì„œ 3ê°œì˜ ì½˜ì†” ë¡œê·¸ë¥¼ ë³¼ ê²ƒì´ë‹¤.\n\n1. `\"Connecting...\"`\n2. `\"Disconnected.\"`\n3. `\"Connecting...\"`\n\nì´ê²ƒì€ ê°œë°œ ëª¨ë“œì—ì„œ ì˜¬ë°”ë¥¸ ë™ì‘ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ mountí•˜ë©´ì„œ, ë¦¬ì•¡íŠ¸ëŠ” ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í–ˆë‹¤ê°€ ë‹¤ì‹œ ì™€ë„ ì½”ë“œê°€ ë¬´ë„ˆì§€ì§€ ì•ŠëŠ” ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•œë‹¤. ì—°ê²°ì„ í•´ì œí•˜ê³  ë‹¤ì‹œ ì—°ê²°í•˜ëŠ” ê²ƒì€ ì •í™•íˆ ì¼ì–´ë‚˜ëŠ” ì¼ì´ë‹¤! cleanup ì„ ì˜ êµ¬í˜„í•œë‹¤ë©´, Effectë¥¼ í•œë²ˆ ì‹¤í–‰í•˜ê³  cleanupí•˜ê³ , ë‹¤ì‹œ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ìœ ì €ê°€ ë³¼ ìˆ˜ ì—†ëŠ” ì°¨ì´ì¼ ê²ƒì´ë‹¤. ë¦¬ì•¡íŠ¸ê°€ ê°œë°œí™˜ê²½ì—ì„œ ë‹ˆ ì½”ë“œì— ë²„ê·¸ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì¡°ì‚¬í•˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ connect/disconnect í˜¸ì¶œì„ í•œë‹¤. ì´ê²ƒì€ ì¼ë°˜ì ì´ê³  ì—†ì• ë ¤ê³  í•˜ë©´ ì•ˆëœë‹¤.\n\ní”„ë¡œë•ì…˜ì—ì„œëŠ” `\"Connecting...\"` ì´ í•œë²ˆë§Œ ì¶œë ¥ë  ê²ƒì´ë‹¤. í•œë²ˆ ë” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸í•˜ëŠ” ê²ƒì€ ê°œë°œí™˜ê²½ì—ì„œ Effectì— cleanupì´ í•„ìš”í•˜ë‹¤ëŠ” ê±¸ ì°¾ëŠ” ê²ƒì„ ë„ì™€ì£¼ê¸° ìœ„í•´ì„œì´ë‹¤. ì´ëŸ° ê°œë°œ ë™ì‘ì„ ì—†ì• ê¸° ìœ„í•´ Strict Modeë¥¼ ëŒ ìˆ˜ ìˆì§€ë§Œ ê³„ì† ì¼œì ¸ìˆê¸°ë¥¼ ê¶Œì¥í•œë‹¤. ìœ„ì™€ ê°™ì€ ë²„ê·¸ë¥¼ ë§ì´ ì°¾ê²Œ í•´ì¤€ë‹¤.\n\n## Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ê°€?\n\në¦¬ì•¡íŠ¸ëŠ” ì˜ë„ì ìœ¼ë¡œ ìœ„ì˜ ì˜ˆì œ ì²˜ëŸ¼ ë²„ê·¸ë¥¼ ì°¾ê¸° ì‰½ë„ë¡ ê°œë°œí™˜ê²½ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ remount í•œë‹¤. ì˜¬ë°”ë¥¸ ì§ˆë¬¸ì€ **â€œEffectë¥¼ í•œë²ˆë§Œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•â€ì´ ì•„ë‹ˆë¼ â€œEffectê°€ remount í›„ì—ë„ ì˜ ë™ì‘í•˜ë„ë¡ ê³ ì¹˜ëŠ” ë°©ë²•â€ ì´ì–´ì•¼ í•œë‹¤.** ë³´í†µ ì •ë‹µì€ cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤. cleanup functionì€ Effectì˜ ë™ì‘ì„ Effectê°€ ë­˜ í•˜ë“  ë©ˆì¶”ê±°ë‚˜ ë˜ëŒë¦´ ê²ƒì´ë‹¤. ì œ 1ì˜ ê·œì¹™ì€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ Effectê°€ í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ê°œë°œ í™˜ê²½ì—ì„œ effect â†’ cleanup â†’ effect í•˜ëŠ” ë™ì•ˆ ìœ ì €ê°€ ê·¸ê²ƒì„ ì‹ë³„í•  ìˆ˜ ì—†ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.\n\nëŒ€ë¶€ë¶„ì˜ ì‘ì„±ë  Effect ì•„ë˜ì˜ ì¼ë°˜ì ì¸ íŒ¨í„´ì— ì†í•  ê²ƒì´ë‹¤.\n\n## Non-React ìœ„ì ¯ ë‹¤ë£¨ê¸°\n\nê°€ë” Reactë¡œ ì‘ì„±ë˜ì§€ ì•Šì€ UI ìœ„ì ¯ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ map ì»´í¬ë„ŒíŠ¸ë¥¼ í˜ì´ì§€ì— ì¶”ê°€í•œë‹¤ê³  í•´ë³´ì. `setZoomLevel` ì´ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆê³  ë¦¬ì•¡íŠ¸ ì½”ë“œì—ì„œ `zoomLevel`ì˜ ìƒíƒœ ê°’ì„ í†µí•´ zoom levelì„ ë™ê¸°í™” í•˜ê³  ì‹¶ë‹¤. EffectëŠ” ì´ë ‡ê²Œ ìƒê²¼ì„ ê²ƒì´ë‹¤.\n\n```tsx\nuseEffect(() =\u003e {\n  const map = mapRef.current;\n  map.setZoomLevel(zoomLevel);\n}, [zoomLevel]);\n```\n\nì´ ê²½ìš°ì—ëŠ” cleanup ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. ê°œë°œ ëª¨ë“œì—ì„œëŠ” ë¦¬ì•¡íŠ¸ê°€ Effectë¥¼ 2ë²ˆ í˜¸ì¶œí•  ê²ƒì´ì§€ë§Œ ì´ê²ƒì€ setZoomLevelì´ ê°™ì€ ê°’ìœ¼ë¡œ 2ë²ˆ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì•„ë‹ˆë‹¤. ì¡°ê¸ˆì€ ëŠë¦´ ìˆ˜ ìˆì§€ë§Œ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ê·¸ë ‡ì§€ í”„ë¡œë•ì…˜ì—ì„  ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.\n\nì–´ë–¤ APIëŠ” í•œë²ˆì— í•¨ìˆ˜ë¥¼ 2ë²ˆ í˜¸ì¶œí•˜ë„ë¡ í—ˆë½í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´ `\u003cdialog\u003e` elementì˜ ë‚´ì¥ í•¨ìˆ˜ì¸ `showModal` í•¨ìˆ˜ëŠ” 2ë²ˆ í˜¸ì¶œí•œë‹¤ë©´ ì—ëŸ¬ë¥¼ ë±‰ì„ ê²ƒì´ë‹¤. cleanup functionì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ dialogë¥¼ ë‹«ê²Œ í•œë‹¤.\n\n```tsx\nuseEffect(() =\u003e {\n  const dialog = dialogRef.current;\n  dialog.showModal();\n  return () =\u003e dialog.close();\n}, []);\n```\n\nê°œë°œ í™˜ê²½ì—ì„œ, EffectëŠ” showModal()ì„ í˜¸ì¶œí•˜ê³  ì¦‰ì‹œ close() ê·¸ë¦¬ê³ ëŠ” showModal()ì„ ë‹¤ì‹œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ì´ ë™ì‘ì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‚¬ìš©ìê°€ showModalì„ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ë™ì‘ê³¼ ê°™ë‹¤.\n\n## ì´ë²¤íŠ¸ êµ¬ë…í•˜ê¸°\n\në§Œì•½ Effectê°€ ë¬´ì–¸ê°€ë¥¼ êµ¬ë…í•˜ê³  ìˆë‹¤ë©´ cleanup functionì€ êµ¬ë… ì·¨ì†Œë¥¼ í•´ì•¼í•œë‹¤.\n\n```tsx\nuseEffect(() =\u003e {\n  function handleScroll(e) {\n    console.log(e.clientX, e.clientY);\n  }\n  window.addEventListener(\"scroll\", handleScroll);\n  return () =\u003e window.removeEventListener(\"scroll\", handleScroll);\n}, []);\n```\n\nê°œë°œ í™˜ê²½ì—ì„œ EffectëŠ” addEventListener(), removeEventListener() ê·¸ë¦¬ê³  ë‹¤ì‹œ addEventListener()ë¥¼ ê°™ì€ í•¸ë“¤ëŸ¬ë¡œ í˜¸ì¶œí•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ í•˜ë‚˜ì˜ í™œì„± êµ¬ë…ë§Œ í•œ ì‹œê°„ì— ì¡´ì¬í•œë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ addEventListenerë¥¼ í•œë²ˆ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.\n\n## ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°\n\në§Œì•½ Effectì— ì• ë‹ˆë©”ì´ì…˜ì´ ìˆë‹¤ë©´ cleanup functionì´ ì• ë‹ˆë©”ì´ì…˜ì„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.\n\n```tsx\nuseEffect(() =\u003e {\n  const node = ref.current;\n  node.style.opacity = 1; // Trigger the animation\n  return () =\u003e {\n    node.style.opacity = 0; // Reset to the initial value\n  };\n}, []);\n```\n\nê°œë°œ í™˜ê²½ì—ì„œ opacirtyëŠ” 1ë¡œ ì„¤ì •ëë‹¤ê°€, 0 ê·¸ë¦¬ê³  ë‹¤ì‹œ 1ë¡œ ì„¤ì •ë  ê²ƒì´ë‹¤. ì´ê²ƒì€ í”„ë¡œë•ì…˜ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ opacityë¥¼ 1ë¡œ ë°”ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë§Œì•½ ì„œë“œíŒŒí‹° ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ tweeningë„ ì§€ì›í•œë‹¤ë©´ cleanup functionì€ tweenì˜ ì‹œê°„ ì„¤ì •ë„ ì´ˆê¸° ê°’ìœ¼ë¡œ ì¬ì„¤ì • í•´ì•¼ í•œë‹¤.\n\n## ë°ì´í„° fetching\n\nEffectê°€ ë¬´ì–¸ê°€ë¥¼ fetching í•œë‹¤ë©´ cleanup functionì€ fetchë¥¼ abortí•˜ê±°ë‚˜ ë¬´ì‹œí•´ì•¼ í•œë‹¤:\n\n```tsx\nuseEffect(() =\u003e {\n  let ignore = false;\n\n  async function startFetching() {\n    const json = await fetchTodos(userId);\n    if (!ignore) {\n      setTodos(json);\n    }\n  }\n\n  startFetching();\n\n  return () =\u003e {\n    ignore = true;\n  };\n}, [userId]);\n```\n\në„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì´ë¯¸ ì¼ì–´ë‚¬ê¸° ë•Œë¬¸ì— â€œundoâ€ í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ cleanup functionì€ ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ” fetchê°€ ì•±ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, userIdê°€ Aliceì—ì„œ Bobìœ¼ë¡œ ë°”ë€ŒëŠ” ê²½ìš° cleanupì€ Aliceì˜ reponseëŠ” Bob ë‹¤ìŒ ë„ì°©í•˜ë”ë¼ë„ ë¬´ì‹œí•´ì•¼ í•œë‹¤.\n\nê°œë°œ í™˜ê²½ì—ì„œëŠ”, ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ 2ê°œì˜ fetchë¥¼ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì˜ëª»ëœ ê²ƒì€ ì—†ë‹¤. ìœ„ì™€ ê°™ì€ ì ‘ê·¼ë²•ìœ¼ë¡œ ì²« ë²ˆì§¸ ErffectëŠ” ì¦‰ì‹œ cleaned up ë  ê²ƒì´ê³  ignore ë³€ìˆ˜ì˜ ë³µì‚¬ë³¸ì€ trueê°€ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì¶”ê°€ì ì¸ ìš”ì²­ì´ ìˆë”ë¼ë„ if(!ignore) check ë•ë¶„ì— ìƒíƒœì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.\n\ní”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ìˆì„ ê²ƒì´ë‹¤. ë§Œì•½ ë‘ ë²ˆì§¸ ìš”ì²­ì´ ê°œë°œ í™˜ê²½ì—ì„œ ê·€ì°®ê²Œ í•œë‹¤ë©´ ê°€ì¥ ì¢‹ì€ ì ‘ê·¼ ë°©ë²•ì€ ì¤‘ë³µëœ ìš”ì²­ê³¼ ìºì‹œë¥¼ ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\n```tsx\nfunction TodoList() {\n  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);\n  // ...\n```\n\nì´ê²ƒì€ ê°œë°œ ê²½í—˜ì„ ìƒìŠ¹ì‹œí‚¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì•±ì„ ë” ë¹ ë¥´ê²Œ ë§Œë“ ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìœ ì €ëŠ” ë°ì´í„°ê°€ ìºì‹œë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¡œë“œë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤. ìŠ¤ìŠ¤ë¡œ ìºì‹œë¥¼ ë§Œë“¤ì–´ë„ ë˜ê³  Effect ì—ì„œ ì†ìˆ˜ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì‹  ì—¬ëŸ¬ ê°€ì§€ ëŒ€ì²´ì¬ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n## ë¶„ì„ ë³´ë‚´ê¸°\n\nì´ ì½”ë“œê°€ í˜ì´ì§€ ë°©ë¬¸í•  ë•Œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤ê³  ìƒê°í•´ë³´ì.\n\n```tsx\nuseEffect(() =\u003e {\n  logVisit(url); // Sends a POST request\n}, [url]);\n```\n\nê°œë°œ í™˜ê²½ì—ì„œëŠ”, `logVisit` ì´ ëª¨ë“  URL ë§ˆë‹¤ 2ë²ˆ ìš”ì²­í•  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤. **ì½”ë“œ ê·¸ëŒ€ë¡œ ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ì•ì˜ ì˜ˆì œ ì²˜ëŸ¼ `í•œë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒê³¼ ë‘ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²ƒì—ì„œ ìœ ì €ê°€ ì°¨ì´ë¥¼ ëŠë‚„ ìˆ˜ ì—†ë‹¤.`** ì‹¤ì œì˜ ê´€ì ì—ì„œ ë³´ë©´, ê°œë°œ í™˜ê²½ì´ í”„ë¡œë•ì…˜ì˜ ì§€í‘œë¥¼ ì˜¤ì—¼ì‹œí‚¤ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì—`logVisit` ì€ ê°œë°œ í™˜ê²½ì—ì„œ ì•„ë¬´ê²ƒë„ í•˜ë©´ ì•ˆëœë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” íŒŒì¼ì„ ì €ì¥í•  ë•Œ ë§ˆë‹¤ remount ë˜ë¯€ë¡œ ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì–´ì°¨í”¼ ì—¬ëŸ¬ë²ˆ ë³´ë‚¸ë‹¤.\n\n**í”„ë¡œë•ì…˜ì—ì„œëŠ” ì¤‘ë³µëœ visit logê°€ ì—†ë‹¤.**\n\në³´ë‚´ê³  ìˆëŠ” ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ë””ë²„ê·¸ í•˜ê¸° ìœ„í•´ì„œëŠ” ì•±ì„ ìŠ¤í…Œì´ì§• í™˜ê²½(production mode)ì— ë°°í¬í•˜ê±°ë‚˜ ì„ì‹œë¡œ Strict Modeë¥¼ ì œê±°í•˜ê³ , ê°œë°œ í™˜ê²½ì—ì„œ remounting checkë¥¼ í•  ìˆ˜ ìˆë‹¤. Effect ëŒ€ì‹  route change ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¶„ì„ì„ ë³´ë‚¼ ìˆ˜ë„ ìˆë‹¤. ì¢€ ë” ì •ë°€í•œ ë¶„ì„ì„ ìœ„í•´ì„œëŠ” `intersection observers` ê°€ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ viewportì— ìˆê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ ë³´ì´ëŠ”ì§€ ë„ì™€ì¤„ ìˆ˜ ìˆë‹¤.\n\n## Effectê°€ ì•„ë‹Œ ê²ƒ: ì•± init\n\nì–´ë–¤ ë¡œì§ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•´ì•¼ í•œë‹¤. ì´ëŸ° ê±´ ì»´í¬ë„ŒíŠ¸ ë°–ì— ë‘˜ ìˆ˜ ìˆë‹¤.\n\n```tsx\nif (typeof window !== \"undefined\") {\n  // Check if we're running in the browser.\n  checkAuthToken();\n  loadDataFromLocalStorage();\n}\n\nfunction App() {\n  // ...\n}\n```\n\nì´ê²ƒì€ í˜ì´ì§€ê°€ ë¸Œë¼ìš°ì €ì— ë¡œë“œë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•  ê²ƒì„ ë³´ì¥í•œë‹¤.\n\n## Effectê°€ ì•„ë‹Œ ê²ƒ: ì œí’ˆ êµ¬ë§¤\n\në•Œë•Œë¡œ cleanup functionì„ ì‘ì„±í•˜ë”ë¼ë„ Effectê°€ 2ë²ˆ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ user-visibleí•œ ë™ì‘ì„ ë§‰ì„ ë°©ë²•ì´ ì—†ì„ ìˆ˜ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Effectê°€ ì œí’ˆ êµ¬ë§¤ ê°™ì€ POST ìš”ì²­ì„ ë³´ë‚¸ë‹¤.\n\n```tsx\nuseEffect(() =\u003e {\n  // ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.\n  fetch(\"/api/buy\", { method: \"POST\" });\n}, []);\n```\n\nì œí’ˆì´ ë‘ë²ˆ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›ì¹˜ ì•Šì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì€ ì™œ Effectì— ì´ ë¡œì§ì„ ë„£ì–´ì•¼ë§Œ í–ˆì„ê¹Œ? ë§Œì•½ ìœ ì €ê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ê°”ë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì˜¨ë‹¤ë©´? EffectëŠ” ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤. ìœ ì €ê°€ í˜ì´ì§€ë¥¼ ë°©ë¬¸í–ˆì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ë°”ë¼ì§€ ì•Šì„ ê²ƒì´ë‹¤. êµ¬ë§¤ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì œí’ˆì´ êµ¬ë§¤ë˜ëŠ” ê²ƒì„ ì›í•  ê²ƒì´ë‹¤.\n\nêµ¬ë§¤ëŠ” ë Œë”ë¡œ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤; íŠ¹ì • ì¸í„°ë™ì…˜ì´ ì˜í•´ ë°œìƒí•œë‹¤. ë‹¨ì§€ ì¸í„°ë™ì…˜ì´ í•œë²ˆ ë°œìƒí–ˆì„ ë•Œ í•œë²ˆ ì‹¤í–‰ë  ë¿ì´ë‹¤. Effectë¥¼ ì§€ìš°ê³  api ìš”ì²­ì€ êµ¬ë§¤ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì˜®ê¸°ì.\n\n```tsx\nfunction handleClick() {\n  // âœ… Buying is an event because it is caused by a particular interaction.\n  fetch(\"/api/buy\", { method: \"POST\" });\n}\n```\n\në§Œì•½ remountê°€ ì•±ì˜ ë¡œì§ì„ íŒŒê´´í•œë‹¤ë©´ ì´ê²ƒì€ ë“œëŸ¬ë‚˜ì§€ ì•Šì€ ì¡´ì¬í•˜ëŠ” ë²„ê·¸ì„ì„ ë³´ì—¬ì¤€ë‹¤. ìœ ì €ì˜ ì‹œì„ ì—ì„œ, í˜ì´ì§€ë¥¼ ë°©ë¬¸í•˜ëŠ” ê²ƒì€ ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜ ë§í¬ë¥¼ ëˆ„ë¥´ëŠ” ê²ƒê³¼ ë‹¤ë¥´ë©´ ì•ˆëœë‹¤. ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ê°œë°œ í™˜ê²½ì—ì„œ í•œë²ˆ remount í•¨ìœ¼ë¡œì¨ ì´ ì›ì¹™ì„ íŒŒê´´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì…ì¦í•œë‹¤.\n\n## í•œë²ˆì— ë•Œë ¤ë„£ê¸°\n\nì´ í”Œë ˆì´ê·¸ë¼ìš´ë“œëŠ” ì˜ˆì œì—ì„œ Effectê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ â€œëŠë‚Œì„ ê°–ë„ë¡\" ë„ì™€ì¤€ë‹¤.\n\nì´ ì˜ˆì œëŠ” Effectê°€ ì‹¤í–‰ë˜ê³  3ì´ˆ í›„ input textê°€ console.logì™€ í•¨ê»˜ ë‚˜íƒ€ë‚˜ê²Œ í•˜ë„ë¡ setTimeoutì„ ì‚¬ìš©í•œë‹¤. ì´ cleanup functionì€ ëŒ€ê¸°ì¤‘ì¸ timeoutì„ ì·¨ì†Œí•œë‹¤. â€œMount the componentâ€ë¥¼ ëˆŒëŸ¬ì„œ ì‹œì‘í•´ë³´ì.\n\n[playground example](https://codesandbox.io/s/8jsz1t?file=%2FApp.js\u0026from-sandpack=true)\n\n\u003e ëŒ€ì¶© Schedule, Cancel ë˜ëŠ” ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆê³  ì—¬ëŸ¬ ë²ˆ ì…ë ¥í•´ë„ clearTimeout ë•Œë¬¸ì— textê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì…ë ¥í•œ ì‹œì ìœ¼ë¡œë¶€í„° 3ì´ˆ í›„ì— ë‹¨ í•˜ë‚˜ë§Œ ë³´ì—¬ì§ˆ ê²ƒì´ë¼ëŠ” ì„¤ëª…\n\n## Recap\n\n- Unlike events, Effects are caused by rendering itself rather than a particular interaction.\n- Effects let you synchronize a component with some external system (third-party API, network, etc).\n- By default, Effects run after every render (including the initial one).\n- React will skip the Effect if all of its dependencies have the same values as during the last render.\n- You canâ€™t â€œchooseâ€ your dependencies. They are determined by the code inside the Effect.\n- An empty dependency array (`[]`) corresponds to the component â€œmountingâ€, i.e. being added to the screen.\n- When Strict Mode is on, React mounts components twice (in development only!) to stress-test your Effects.\n- If your Effect breaks because of remounting, you need to implement a cleanup function.\n- React will call your cleanup function before the Effect runs next time, and during the unmount.\n"},"__N_SSG":true},"page":"/posts/[fileName]","query":{"fileName":"Synchronizing with Effects ë²ˆì—­"},"buildId":"eXTxztqATL_0xplJ-YxvT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>